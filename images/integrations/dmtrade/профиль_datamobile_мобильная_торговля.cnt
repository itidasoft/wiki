#eqprofile
#begin
#description Профиль DataMobile Мобильная торговля
#name Профиль DataMobile Мобильная торговля
#code 0000000417
#command INSERT INTO speceqprofiles (CODE,ACTION_ID,ACTION_SCRIPT,F_CHECK,FARC,UPDATED,RECEIVED,EDIT_DAT) VALUES ('----------',15.00000000,'IF ( TYPE("ИНДЕКСУСТРОЙСТВА") == "U" )/##CHR(13)##//##CHR(10)##/{/##CHR(13)##//##CHR(10)##/	СООБЩЕНИЕ("Для работы данного профиля требуется Айтида версии 4.3.2 и выше", "Требуется обновление");/##CHR(13)##//##CHR(10)##/	RETURN false;/##CHR(13)##//##CHR(10)##/}/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/// ПЕРЕМЕННЫЕ, ЗНАЧЕНИЯ КОТОРЫХ ВЛИЯЮТ НА АЛГОРИТМ ВЫГРУЗКИ/##CHR(13)##//##CHR(10)##/_ВЫГРУЖАТЬОСТАТКИ			= true;/##CHR(13)##//##CHR(10)##/_ВЫГРУЖАТЬДОКУМЕНТ			= true;/##CHR(13)##//##CHR(10)##/_ВЫГРУЖАТЬЦЕНЫ				= true;/##CHR(13)##//##CHR(10)##/_ВЫГРУЖАТЬСКЛАДЫ			= true;/##CHR(13)##//##CHR(10)##/_ВЫГРУЖАТЬКОНТРАГЕНТОВ		= true;/##CHR(13)##//##CHR(10)##/_ВЫГРУЖАТЬПОЛЬЗОВАТЕЛЕЙ		= true;/##CHR(13)##//##CHR(10)##/_ВЫГРУЖАТЬКАТЕГОРИИ			= true;/##CHR(13)##//##CHR(10)##/_ВЫГРУЖАТЬТОВАРЫ			= true;/##CHR(13)##//##CHR(10)##/_ВЫГРУЖАТЬШТРИХКОДЫ			= true;/##CHR(13)##//##CHR(10)##/_ВЫГРУЖАТЬСТАТУСЫДОКУМЕНТОВ	= true;/##CHR(13)##//##CHR(10)##/_ВЫГРУЖАТЬСТАТУСЫПЛАТЕЖЕЙ	= true;/##CHR(13)##//##CHR(10)##/_ВЫГРУЖАТЬПРИЧИНЫОТМЕНЫ		= true;/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/IF ( ТИП( "СПИСОКДОКУМЕНТОВ" ) == "U" ) СПИСОКДОКУМЕНТОВ= "";/##CHR(13)##//##CHR(10)##/IF ( ТИП( "ПРИЗНАКОЧИСТКИТСД" ) == "U" ) ПРИЗНАКОЧИСТКИТСД = false;/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/_ПАПКАВЫГРУЗКИ	= ЗАПРОС( "SELECT CASE WHEN connectstring = '''' THEN serialnumber ELSE connectstring END FROM sprequipment WHERE code = ''" + КОДОБОРУДОВАНИЯ + "''" );/##CHR(13)##//##CHR(10)##/IF (!ПУСТО(_ПАПКАВЫГРУЗКИ))/##CHR(13)##//##CHR(10)##/{/##CHR(13)##//##CHR(10)##/	IF ( ПРАВСИМВ( _ПАПКАВЫГРУЗКИ, 1 ) != "\" )/##CHR(13)##//##CHR(10)##/		_ПАПКАВЫГРУЗКИ	+= "\";/##CHR(13)##//##CHR(10)##/		/##CHR(13)##//##CHR(10)##/	IF ( ФАЙЛ(_ПАПКАВЫГРУЗКИ + "IN", 1) )/##CHR(13)##//##CHR(10)##/		_ПАПКАВЫГРУЗКИ += "IN\";	/##CHR(13)##//##CHR(10)##/}/##CHR(13)##//##CHR(10)##/ELSE/##CHR(13)##//##CHR(10)##/{/##CHR(13)##//##CHR(10)##/	_ПАПКАВЫГРУЗКИ			= "D:\";/##CHR(13)##//##CHR(10)##/}/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/IF ( _ВЫГРУЖАТЬПОЛЬЗОВАТЕЛЕЙ )/##CHR(13)##//##CHR(10)##/{/##CHR(13)##//##CHR(10)##/	IF ( !RESTAPI.DMTRADE_ВыгрузитьПользователей() )/##CHR(13)##//##CHR(10)##/		RETURN false;/##CHR(13)##//##CHR(10)##/}/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/IF ( _ВЫГРУЖАТЬСКЛАДЫ )/##CHR(13)##//##CHR(10)##/{/##CHR(13)##//##CHR(10)##/	IF ( !RESTAPI.DMTRADE_ВыгрузитьМагазины() )/##CHR(13)##//##CHR(10)##/		RETURN false;/##CHR(13)##//##CHR(10)##/}/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/IF ( _ВЫГРУЖАТЬКОНТРАГЕНТОВ )/##CHR(13)##//##CHR(10)##/{/##CHR(13)##//##CHR(10)##/	IF ( !RESTAPI.DMTRADE_ВыгрузитьКонтрагентов() )/##CHR(13)##//##CHR(10)##/		RETURN false;/##CHR(13)##//##CHR(10)##/}/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##///выгрузка категорий/##CHR(13)##//##CHR(10)##/IF ( _ВЫГРУЖАТЬКАТЕГОРИИ )/##CHR(13)##//##CHR(10)##/{/##CHR(13)##//##CHR(10)##/	IF ( !RESTAPI.DMTRADE_ВыгрузитьКатегории() )/##CHR(13)##//##CHR(10)##/		RETURN false;/##CHR(13)##//##CHR(10)##/}/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/IF ( _ВЫГРУЖАТЬТОВАРЫ )/##CHR(13)##//##CHR(10)##/{/##CHR(13)##//##CHR(10)##/	IF ( !RESTAPI.DMTRADE_ВыгрузитьТовары() )/##CHR(13)##//##CHR(10)##/		RETURN false;/##CHR(13)##//##CHR(10)##/}/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/IF ( _ВЫГРУЖАТЬШТРИХКОДЫ )/##CHR(13)##//##CHR(10)##/{/##CHR(13)##//##CHR(10)##/	IF ( !RESTAPI.DMTRADE_ВыгрузитьШтрихкоды() )/##CHR(13)##//##CHR(10)##/		RETURN false;/##CHR(13)##//##CHR(10)##/}/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/IF ( _ВЫГРУЖАТЬЦЕНЫ )/##CHR(13)##//##CHR(10)##/{/##CHR(13)##//##CHR(10)##/	IF ( !RESTAPI.DMTRADE_ВыгрузитьЦены() )/##CHR(13)##//##CHR(10)##/		RETURN false;/##CHR(13)##//##CHR(10)##/}/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/IF ( _ВЫГРУЖАТЬОСТАТКИ )/##CHR(13)##//##CHR(10)##/{/##CHR(13)##//##CHR(10)##/	IF ( !RESTAPI.DMTRADE_ВыгрузитьОстатки() )/##CHR(13)##//##CHR(10)##/		RETURN false;/##CHR(13)##//##CHR(10)##/}/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/IF ( _ВЫГРУЖАТЬСТАТУСЫДОКУМЕНТОВ )/##CHR(13)##//##CHR(10)##/{/##CHR(13)##//##CHR(10)##/	IF ( !RESTAPI.DMTRADE_ВыгрузитьСтатусыДокументов() )/##CHR(13)##//##CHR(10)##/		RETURN false;/##CHR(13)##//##CHR(10)##/}/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/IF ( _ВЫГРУЖАТЬСТАТУСЫПЛАТЕЖЕЙ )/##CHR(13)##//##CHR(10)##/{/##CHR(13)##//##CHR(10)##/	IF ( !RESTAPI.DMTRADE_ВыгрузитьСтатусыПлатежей() )/##CHR(13)##//##CHR(10)##/		RETURN false;/##CHR(13)##//##CHR(10)##/}/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/IF ( _ВЫГРУЖАТЬПРИЧИНЫОТМЕНЫ )/##CHR(13)##//##CHR(10)##/{/##CHR(13)##//##CHR(10)##/	IF ( !RESTAPI.DMTRADE_ВыгрузитьПричиныОтменыДоставки() )/##CHR(13)##//##CHR(10)##/		RETURN false;/##CHR(13)##//##CHR(10)##/}/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/RETURN true;',0,0,0,0,'10.11.2023 11:37:38')
#command INSERT INTO speceqprofiles (CODE,ACTION_ID,ACTION_SCRIPT,F_CHECK,FARC,UPDATED,RECEIVED,EDIT_DAT) VALUES ('----------',16.00000000,'// Используйется следующий шаблон/##CHR(13)##//##CHR(10)##/// ШК;Артикул;Наименование;Характеристика;АлкоНаим;АлкоОбъем;АлкоКрепость;Производитель;ПроизвИНН;ПроизвКПП;АлкоКод;АлкоПДФ;АлкоСН;ДатаРозлива;АлкоЕстьВФормах;КодФормыА;Факт/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/_ПАПКАЗАГРУЗКИ	= ЗАПРОС( "SELECT CASE WHEN connectstring = '''' THEN serialnumber ELSE connectstring END FROM sprequipment WHERE code = ''" + КОДОБОРУДОВАНИЯ + "''" );/##CHR(13)##//##CHR(10)##/IF (!ПУСТО(_ПАПКАЗАГРУЗКИ))/##CHR(13)##//##CHR(10)##/{/##CHR(13)##//##CHR(10)##/	IF ( ПРАВСИМВ( _ПАПКАЗАГРУЗКИ, 1 ) != "\" )/##CHR(13)##//##CHR(10)##/		_ПАПКАЗАГРУЗКИ	+= "\";/##CHR(13)##//##CHR(10)##/		/##CHR(13)##//##CHR(10)##/	IF ( ФАЙЛ(_ПАПКАЗАГРУЗКИ + "OUT", 1) )/##CHR(13)##//##CHR(10)##/		_ПАПКАЗАГРУЗКИ += "OUT\";/##CHR(13)##//##CHR(10)##/}/##CHR(13)##//##CHR(10)##/ELSE/##CHR(13)##//##CHR(10)##/{/##CHR(13)##//##CHR(10)##/	_ПАПКАЗАГРУЗКИ			= "D:\";/##CHR(13)##//##CHR(10)##/}/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/_ИМЯФАЙЛАЗАГРУЗКИ	= ФАЙЛНАЙТИ( _ПАПКАЗАГРУЗКИ + "*.dmU" );/##CHR(13)##//##CHR(10)##/_ИМЯANSIФАЙЛА		= _ПАПКАЗАГРУЗКИ + УНИКАЛЬНОЕИМЯ( ) + ".txt";/##CHR(13)##//##CHR(10)##/ИДДОКУМЕНТА			= 1;/##CHR(13)##//##CHR(10)##/Фирма				= @ФирмаПоУмолчанию;/##CHR(13)##//##CHR(10)##/Склад				= ЗАПРОС( "SELECT sklad FROM sprequipment WHERE code= ''" + КОДОБОРУДОВАНИЯ + "''" );/##CHR(13)##//##CHR(10)##/СписокНеНайденных	= "";/##CHR(13)##//##CHR(10)##/WHILE ( !ПУСТО( _ИМЯФАЙЛАЗАГРУЗКИ ) )/##CHR(13)##//##CHR(10)##/{/##CHR(13)##//##CHR(10)##/	// Необходимо перенести данные из файла в таблицу с данными/##CHR(13)##//##CHR(10)##/	КОДДОКУМЕНТА		= @КодДокумента;/##CHR(13)##//##CHR(10)##/	_ФАЙЛЗАГРУЗКИ		= ФАЙЛОТКРЫТЬ( _ИМЯФАЙЛАЗАГРУЗКИ, 0 );/##CHR(13)##//##CHR(10)##/	ФАЙЛУСТАНОВИТЬУКАЗАТЕЛЬ( _ФАЙЛЗАГРУЗКИ, 0 );/##CHR(13)##//##CHR(10)##/	//СТРОКА				= ПЕРЕКОДИРОВАТЬ( ФАЙЛПРОЧИТАТЬ( _ФАЙЛЗАГРУЗКИ, "S", ФАЙЛРАЗМЕР( _ФАЙЛЗАГРУЗКИ ) ), "UTF-16", "ANSI" );/##CHR(13)##//##CHR(10)##/	ДАННЫЕИЗФАЙЛА 		= ФАЙЛПРОЧИТАТЬ( _ФАЙЛЗАГРУЗКИ, "B", ФАЙЛРАЗМЕР( _ФАЙЛЗАГРУЗКИ ) );/##CHR(13)##//##CHR(10)##/	/*/##CHR(13)##//##CHR(10)##/	IF (!ПУСТО(ДАННЫЕИЗФАЙЛА))/##CHR(13)##//##CHR(10)##/	{/##CHR(13)##//##CHR(10)##/		СТРОКА				= ПЕРЕКОДИРОВАТЬ( ДАННЫЕИЗФАЙЛА , "UTF-16", "ANSI" );/##CHR(13)##//##CHR(10)##/	}/##CHR(13)##//##CHR(10)##/	ELSE/##CHR(13)##//##CHR(10)##/	{/##CHR(13)##//##CHR(10)##/		СТРОКА				= "";/##CHR(13)##//##CHR(10)##/	}/##CHR(13)##//##CHR(10)##/	*//##CHR(13)##//##CHR(10)##/	СТРОКА = ДАННЫЕИЗФАЙЛА;/##CHR(13)##//##CHR(10)##/	ФАЙЛЗАКРЫТЬ( _ФАЙЛЗАГРУЗКИ );/##CHR(13)##//##CHR(10)##/	// Записываем перекодированную строку в новый файл/##CHR(13)##//##CHR(10)##/	_ФАЙЛЗАГРУЗКИ		= ФАЙЛСОЗДАТЬ( _ИМЯANSIФАЙЛА );/##CHR(13)##//##CHR(10)##/	ФАЙЛЗАПИСАТЬ( _ФАЙЛЗАГРУЗКИ, СТРОКА );/##CHR(13)##//##CHR(10)##/	ФАЙЛУСТАНОВИТЬУКАЗАТЕЛЬ( _ФАЙЛЗАГРУЗКИ, 0 );/##CHR(13)##//##CHR(10)##/	/##CHR(13)##//##CHR(10)##/	// Пропускаем первую строку - это пустые заголовки/##CHR(13)##//##CHR(10)##/	ФАЙЛПРОЧИТАТЬ( _ФАЙЛЗАГРУЗКИ, "S" );/##CHR(13)##//##CHR(10)##/	КОЛИЧЕСТВОСТРОКВФАЙЛЕ	= ФАЙЛКОЛИЧЕСТВОСТРОК( _ФАЙЛЗАГРУЗКИ );/##CHR(13)##//##CHR(10)##/	НОМЕРСТРОКИФАЙЛА		= 0;/##CHR(13)##//##CHR(10)##/	ИНДИКАТОР( "Загрузка файла " + _ИМЯФАЙЛАЗАГРУЗКИ, КОЛИЧЕСТВОСТРОКВФАЙЛЕ );/##CHR(13)##//##CHR(10)##/	WHILE ( !ФАЙЛКОНЕЦФАЙЛА( _ФАЙЛЗАГРУЗКИ ) )/##CHR(13)##//##CHR(10)##/	{/##CHR(13)##//##CHR(10)##/		НОМЕРСТРОКИФАЙЛА++;/##CHR(13)##//##CHR(10)##/		IF ( НОМЕРСТРОКИФАЙЛА % 10 == 0 )/##CHR(13)##//##CHR(10)##/			ИНДИКАТОР( НОМЕРСТРОКИФАЙЛА, "Загружено " + НОМЕРСТРОКИФАЙЛА + " из " + КОЛИЧЕСТВОСТРОКВФАЙЛЕ );/##CHR(13)##//##CHR(10)##/			/##CHR(13)##//##CHR(10)##/		СТРОКА			= ";" + ФАЙЛПРОЧИТАТЬ( _ФАЙЛЗАГРУЗКИ, "S" );/##CHR(13)##//##CHR(10)##/		КодТовара		= ЗАМЕНИТЬ( ПОЛУЧИТЬСЛОВО( СТРОКА, ";",";", 2 ), """", "" );/##CHR(13)##//##CHR(10)##/		ШтрихКод		= ЗАМЕНИТЬ( ПОЛУЧИТЬСЛОВО( СТРОКА, ";",";", 3 ), """", "" );/##CHR(13)##//##CHR(10)##/		Количество		= VAL( ЗАМЕНИТЬ( ПОЛУЧИТЬСЛОВО( СТРОКА, ";",";", 6 ), """", "" ) );/##CHR(13)##//##CHR(10)##/		Наименование	= ЗАМЕНИТЬ( ПОЛУЧИТЬСЛОВО( СТРОКА, ";",";", 9 ), """", "" );/##CHR(13)##//##CHR(10)##/		АлкоПДФ			= ЗАМЕНИТЬ( ПОЛУЧИТЬСЛОВО( СТРОКА, ";",";", 11 ), """", "" );/##CHR(13)##//##CHR(10)##/		АлкоКод			= "";/##CHR(13)##//##CHR(10)##/		IF ( !ПУСТО( АлкоПДФ ) )/##CHR(13)##//##CHR(10)##/			АлкоКод		= ЕГАИС.АлкоКодИзМарки( АлкоПДФ );/##CHR(13)##//##CHR(10)##/		Товар			= "";/##CHR(13)##//##CHR(10)##/		Цена			= 0.00;/##CHR(13)##//##CHR(10)##/		/##CHR(13)##//##CHR(10)##/		// Определяем товар, по ШК или алкокоду/##CHR(13)##//##CHR(10)##/		IF ( !ПУСТО( АлкоКод ) )/##CHR(13)##//##CHR(10)##/			Товар		= ЗАПРОС( "SELECT TOP 1 code FROM sprres_egais WHERE alcocode = ''" + STDF( АлкоКод ) + "''" );/##CHR(13)##//##CHR(10)##/			/##CHR(13)##//##CHR(10)##/		/*	/##CHR(13)##//##CHR(10)##/		//определим весовой товар по коду/##CHR(13)##//##CHR(10)##/		IF ( LEN( ШтрихКод ) < 13 AND ATC( ШтрихКод, КодТовара ) > 0 )/##CHR(13)##//##CHR(10)##/			Товар = ЗАПРОС("SELECT code FROM sprres WHERE maincode= ''" + STDF( КодТовара ) + "''");/##CHR(13)##//##CHR(10)##/		*//##CHR(13)##//##CHR(10)##/		/##CHR(13)##//##CHR(10)##/		//определим товар сперва по коду/##CHR(13)##//##CHR(10)##/		Товар = ЗАПРОС("SELECT code FROM sprres WHERE maincode= ''" + STDF( КодТовара ) + "''");/##CHR(13)##//##CHR(10)##/			/##CHR(13)##//##CHR(10)##/		IF ( ПУСТО( Товар ) AND !ПУСТО( ШтрихКод ) )/##CHR(13)##//##CHR(10)##/		{/##CHR(13)##//##CHR(10)##/			// Сначала надо попробовать распознать штриховой код по шаблону из справочника единиц измерения/##CHR(13)##//##CHR(10)##/			ДОБАВИТЬКОНТЕКСТ( "SELECT code, bctemplate /##CHR(13)##//##CHR(10)##/							   FROM spredn /##CHR(13)##//##CHR(10)##/							   WHERE bctemplate <> '''' AND LEN( bctemplate ) = " + ДЛИНА( ШтрихКод ) + " AND/##CHR(13)##//##CHR(10)##/									( CHARINDEX( SUBSTRING( bctemplate, 1, 1 ), ''0123456789'' ) = 0 OR/##CHR(13)##//##CHR(10)##/									  ( CHARINDEX( SUBSTRING( bctemplate, 2, 1 ), ''0123456789'' ) = 0 AND /##CHR(13)##//##CHR(10)##/										SUBSTRING( bctemplate, 1, 1 ) = ''" + STDF( LEFT( ШтрихКод, 1 ) ) + "'' ) OR/##CHR(13)##//##CHR(10)##/									  SUBSTRING( bctemplate, 1, 2 ) = ''" + STDF( LEFT( ШтрихКод, 2 ) ) + "'' )", "ШаблоныШК", 1 );/##CHR(13)##//##CHR(10)##/			WHILE ( !КОНЕЦКОНТЕКСТА( "ШаблоныШК" ) AND ПУСТО( Товар ) )/##CHR(13)##//##CHR(10)##/			{/##CHR(13)##//##CHR(10)##/				КодТовараИзШК	= "";/##CHR(13)##//##CHR(10)##/				АртикулИзШК		= "";/##CHR(13)##//##CHR(10)##/				КоличествоИзШК	= "";/##CHR(13)##//##CHR(10)##/				// Проверяем на значащие цифры, удовлетворяет ли наш штрих-код шаблону/##CHR(13)##//##CHR(10)##/				Шаблон			= ШаблоныШК.bctemplate;/##CHR(13)##//##CHR(10)##/				НеШтрихКод		= false;/##CHR(13)##//##CHR(10)##/				НомерСимвола	= 1;/##CHR(13)##//##CHR(10)##/				ДлинаШаблона	= ДЛИНА( Шаблон );/##CHR(13)##//##CHR(10)##/				WHILE( НомерСимвола < ДлинаШаблона )/##CHR(13)##//##CHR(10)##/				{/##CHR(13)##//##CHR(10)##/					IF ( AT( "АКМС", ПОДСТРОКА( Шаблон, НомерСимвола, 1 ) ) == 0 AND ПОДСТРОКА( Шаблон, НомерСимвола, 1 ) <> ПОДСТРОКА( ШтрихКод, НомерСимвола, 1 ) )/##CHR(13)##//##CHR(10)##/						НеШтрихКод		= true;/##CHR(13)##//##CHR(10)##/					НомерСимвола++;/##CHR(13)##//##CHR(10)##/				}/##CHR(13)##//##CHR(10)##/				IF ( НеШтрихКод )/##CHR(13)##//##CHR(10)##/				{/##CHR(13)##//##CHR(10)##/					ПРОПУСТИТЬ( 1, "ШаблоныШК" );/##CHR(13)##//##CHR(10)##/					CONTINUE;/##CHR(13)##//##CHR(10)##/				}/##CHR(13)##//##CHR(10)##/				НомерСимвола	= 1;/##CHR(13)##//##CHR(10)##/				WHILE( НомерСимвола < ДлинаШаблона )/##CHR(13)##//##CHR(10)##/				{/##CHR(13)##//##CHR(10)##/					Символ		= ПОДСТРОКА( Шаблон, НомерСимвола, 1 );/##CHR(13)##//##CHR(10)##/					СимволШК	= ПОДСТРОКА( ШтрихКод, НомерСимвола, 1 );/##CHR(13)##//##CHR(10)##/					IF ( Символ == "К" )/##CHR(13)##//##CHR(10)##/						КодТовараИзШК	+= СимволШК;/##CHR(13)##//##CHR(10)##/					ELSE IF ( Символ == "А" )/##CHR(13)##//##CHR(10)##/						АртикулИзШК		+= СимволШК;/##CHR(13)##//##CHR(10)##/					ELSE IF ( Символ == "М" )/##CHR(13)##//##CHR(10)##/						КоличествоИзШК	+= СимволШК;/##CHR(13)##//##CHR(10)##/					НомерСимвола++;/##CHR(13)##//##CHR(10)##/				}/##CHR(13)##//##CHR(10)##/				IF ( !ПУСТО( КодТовараИзШК ) OR !ПУСТО( АртикулИзШК ) )/##CHR(13)##//##CHR(10)##/				{/##CHR(13)##//##CHR(10)##/					Товар		= ЗАПРОС("SELECT code FROM sprres/##CHR(13)##//##CHR(10)##/										  WHERE " + ЕСЛИ( !ПУСТО( КодТовараИзШК )," maincode= ''" + STDF( VAL( КодТовараИзШК ) ) + "''", /##CHR(13)##//##CHR(10)##/																				  " a_code= = ''" + STDF( АртикулИзШК ) + "''" ) );/##CHR(13)##//##CHR(10)##/					IF ( ПУСТО( Количество ) )/##CHR(13)##//##CHR(10)##/						Количество	= VAL( КоличествоИзШК ) / 1000.00;/##CHR(13)##//##CHR(10)##/				}/##CHR(13)##//##CHR(10)##/				ПРОПУСТИТЬ( 1, "ШаблоныШК" );/##CHR(13)##//##CHR(10)##/			}/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/			IF ( ПУСТО( Товар ) )/##CHR(13)##//##CHR(10)##/			{/##CHR(13)##//##CHR(10)##/				// Если не нашли подходящий шаблон или товар, то ищем в таблицах штриховых кодов/##CHR(13)##//##CHR(10)##/				ШтрихКод		= STDF( ШтрихКод );/##CHR(13)##//##CHR(10)##/				Товар			= ЗАПРОС("SELECT nn FROM sprnnbc WHERE bc= ''" + ШтрихКод + "'' /##CHR(13)##//##CHR(10)##/										  UNION SELECT code FROM sprres_ed WHERE barcode= ''" + ШтрихКод + "''/##CHR(13)##//##CHR(10)##/										  UNION SELECT nn FROM reg006  WHERE bc= ''" + ШтрихКод + "''/##CHR(13)##//##CHR(10)##/										  UNION SELECT nn FROM reg009  WHERE bc= ''" + ШтрихКод + "''" );/##CHR(13)##//##CHR(10)##/			}/##CHR(13)##//##CHR(10)##/		}/##CHR(13)##//##CHR(10)##/				/##CHR(13)##//##CHR(10)##/		IF ( !ПУСТО( Товар ) )/##CHR(13)##//##CHR(10)##/		{/##CHR(13)##//##CHR(10)##/			IF ( КОДДОКУМЕНТА == "001" )/##CHR(13)##//##CHR(10)##/				Цена	= ЗАПРОС( "	SELECT TOP 1 cena/##CHR(13)##//##CHR(10)##/									FROM reg001/##CHR(13)##//##CHR(10)##/									WHERE nn= ''" + Товар + "'' AND account_= ''001'' AND priz= ''+'' AND/##CHR(13)##//##CHR(10)##/											( DATEDIFF( day, date, GETDATE( ) ) > 0 OR /##CHR(13)##//##CHR(10)##/											( DATEDIFF( day, date, GETDATE( ) ) = 0 AND DATEDIFF( second, date, GETDATE( ) ) >= 0 ) ) AND sklad= ''" + Склад + "'' /##CHR(13)##//##CHR(10)##/									ORDER BY date DESC, identity_column DESC " );/##CHR(13)##//##CHR(10)##/			ELSE/##CHR(13)##//##CHR(10)##/				Цена	= ЗАПРОС( "	SELECT dbo.fn_calcsklad_cena( ''" + Товар + "'', '''', ''" + Склад + "'', ''001'' )" );/##CHR(13)##//##CHR(10)##/			/##CHR(13)##//##CHR(10)##/			IF ( ПУСТО( Наименование ) )/##CHR(13)##//##CHR(10)##/				Наименование	= ЗАПРОС( "SELECT name FROM sprres WHERE code = ''" + Товар + "''" );/##CHR(13)##//##CHR(10)##/				/##CHR(13)##//##CHR(10)##/		}/##CHR(13)##//##CHR(10)##/		// Если не определили товар и пустая марка, то выводим сообщение/##CHR(13)##//##CHR(10)##/		IF ( ПУСТО( АлкоПДФ ) AND ПУСТО( Товар ) AND ПУСТО( АлкоКод ) )/##CHR(13)##//##CHR(10)##/			СписокНеНайденных	+= ШтрихКод + " " + Наименование + CHR( 13 );/##CHR(13)##//##CHR(10)##/		ELSE/##CHR(13)##//##CHR(10)##/		{/##CHR(13)##//##CHR(10)##/			// Если есть марка, то вместо ШК записываем ее/##CHR(13)##//##CHR(10)##/			IF ( !ПУСТО( АлкоПДФ ) ) ШтрихКод	= STDF( АлкоПДФ );/##CHR(13)##//##CHR(10)##/				/##CHR(13)##//##CHR(10)##/			ЗАПРОС( "INSERT INTO " + _ИМЯТАБЛИЦЫ + " ( doccode, docid, date, nn, nnname, kolp, cena, summa, barcode, firm, sklad, alcocode )/##CHR(13)##//##CHR(10)##/					 VALUES( ''" + КОДДОКУМЕНТА + "'', " + ИДДОКУМЕНТА + ", GETDATE( ), ''" + Товар + "'', ''" + STDF( Наименование )+ "'', " + STR( Количество, 16, 3 ) + ", /##CHR(13)##//##CHR(10)##/					 " + STR( Цена, 16, 2 ) + ", " + STR( Цена * Количество, 16, 2 )  + ", ''" + ШтрихКод + "'', ''" + Фирма + "'', ''" + Склад + "'', ''" + STDF( АлкоКод ) + "'' )" );/##CHR(13)##//##CHR(10)##/		}/##CHR(13)##//##CHR(10)##/	}/##CHR(13)##//##CHR(10)##/	ИНДИКАТОР( );/##CHR(13)##//##CHR(10)##/	ФАЙЛЗАКРЫТЬ( _ФАЙЛЗАГРУЗКИ );/##CHR(13)##//##CHR(10)##/	ОЖИДАНИЕ( 500 );/##CHR(13)##//##CHR(10)##/	ФАЙЛУДАЛИТЬ( _ИМЯANSIФАЙЛА );/##CHR(13)##//##CHR(10)##/	/##CHR(13)##//##CHR(10)##/	ФАЙЛПЕРЕИМЕНОВАТЬ( _ИМЯФАЙЛАЗАГРУЗКИ, _ИМЯФАЙЛАЗАГРУЗКИ + STRTRAN( STRTRAN( STRTRAN( TTOC( ДАТАВРЕМЯ( ), 7 ), ".","" ), ":", "" ), " ", "" ) + ".bak" );/##CHR(13)##//##CHR(10)##/	_ИМЯФАЙЛАЗАГРУЗКИ	= ФАЙЛНАЙТИСЛЕДУЮЩИЙ( );/##CHR(13)##//##CHR(10)##/	ИДДОКУМЕНТА++;/##CHR(13)##//##CHR(10)##/}/##CHR(13)##//##CHR(10)##/ФАЙЛЗАКОНЧИТЬПОИСК( );/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/IF ( !ПУСТО( СписокНеНайденных ) )/##CHR(13)##//##CHR(10)##/	СООБЩЕНИЕ( "Следующие товары не были найдены в базе данных:" + CHR( 13 ) + СписокНеНайденных  );/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/RETURN true;',0,0,0,0,'10.11.2023 11:37:38')
#command INSERT INTO speceqprofiles (CODE,ACTION_ID,ACTION_SCRIPT,F_CHECK,FARC,UPDATED,RECEIVED,EDIT_DAT) VALUES ('----------',18.00000000,'//Свойства драйвера ТСД/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/IF ( ПУСТО( КОДОБОРУДОВАНИЯ ) )/##CHR(13)##//##CHR(10)##/{/##CHR(13)##//##CHR(10)##/	СООБЩЕНИЕ( "Перед настройкой драйвера оборудования необходимо записать карточку торгового оборудования." );/##CHR(13)##//##CHR(10)##/	RETURN false;/##CHR(13)##//##CHR(10)##/}/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/СПИСОКЗАПРАШИВАЕМЫХПАРАМЕТРОВ = "";/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/IF ( ! RESTAPI.DMTRADE_ПроверитьПараметрСистемы( "DMTRADE_ДРАЙВЕРСУБД" ) )/##CHR(13)##//##CHR(10)##/	RETURN false;/##CHR(13)##//##CHR(10)##/ELSE/##CHR(13)##//##CHR(10)##/	СПИСОКЗАПРАШИВАЕМЫХПАРАМЕТРОВ += ЕСЛИ( !ПУСТО( СПИСОКЗАПРАШИВАЕМЫХПАРАМЕТРОВ ), ",", "" ) + "''DMTRADE_ДРАЙВЕРСУБД''";/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/IF ( ! RESTAPI.DMTRADE_ПроверитьПараметрСистемы( "DMTRADE_СЕРВЕРБАЗЫДАННЫХ" ) )/##CHR(13)##//##CHR(10)##/	RETURN false;/##CHR(13)##//##CHR(10)##/ELSE/##CHR(13)##//##CHR(10)##/	СПИСОКЗАПРАШИВАЕМЫХПАРАМЕТРОВ += ЕСЛИ( !ПУСТО( СПИСОКЗАПРАШИВАЕМЫХПАРАМЕТРОВ ), ",", "" ) + "''DMTRADE_СЕРВЕРБАЗЫДАННЫХ''";/##CHR(13)##//##CHR(10)##/	/##CHR(13)##//##CHR(10)##/IF ( ! RESTAPI.DMTRADE_ПроверитьПараметрСистемы( "DMTRADE_ПОРТСЕРВЕРАБАЗЫДАННЫХ" ) )/##CHR(13)##//##CHR(10)##/	RETURN false;/##CHR(13)##//##CHR(10)##/ELSE/##CHR(13)##//##CHR(10)##/	СПИСОКЗАПРАШИВАЕМЫХПАРАМЕТРОВ += ЕСЛИ( !ПУСТО( СПИСОКЗАПРАШИВАЕМЫХПАРАМЕТРОВ ), ",", "" ) + "''DMTRADE_ПОРТСЕРВЕРАБАЗЫДАННЫХ''";	/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/IF ( ! RESTAPI.DMTRADE_ПроверитьПараметрСистемы( "DMTRADE_ПОЛЬЗОВАТЕЛЬСЕРВЕРАБАЗЫДАННЫХ" ) )/##CHR(13)##//##CHR(10)##/	RETURN false;/##CHR(13)##//##CHR(10)##/ELSE/##CHR(13)##//##CHR(10)##/	СПИСОКЗАПРАШИВАЕМЫХПАРАМЕТРОВ += ЕСЛИ( !ПУСТО( СПИСОКЗАПРАШИВАЕМЫХПАРАМЕТРОВ ), ",", "" ) + "''DMTRADE_ПОЛЬЗОВАТЕЛЬСЕРВЕРАБАЗЫДАННЫХ''";	/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/IF ( ! RESTAPI.DMTRADE_ПроверитьПараметрСистемы( "DMTRADE_ПАРОЛЬСЕРВЕРАБАЗЫДАННЫХ" ) )/##CHR(13)##//##CHR(10)##/	RETURN false;/##CHR(13)##//##CHR(10)##/ELSE/##CHR(13)##//##CHR(10)##/	СПИСОКЗАПРАШИВАЕМЫХПАРАМЕТРОВ += ЕСЛИ( !ПУСТО( СПИСОКЗАПРАШИВАЕМЫХПАРАМЕТРОВ ), ",", "" ) + "''DMTRADE_ПАРОЛЬСЕРВЕРАБАЗЫДАННЫХ''";	/##CHR(13)##//##CHR(10)##/	/##CHR(13)##//##CHR(10)##/IF ( ! RESTAPI.DMTRADE_ПроверитьПараметрСистемы( "DMTRADE_ИМЯБАЗЫДАННЫХ" ) )/##CHR(13)##//##CHR(10)##/	RETURN false;/##CHR(13)##//##CHR(10)##/ELSE/##CHR(13)##//##CHR(10)##/	СПИСОКЗАПРАШИВАЕМЫХПАРАМЕТРОВ += ЕСЛИ( !ПУСТО( СПИСОКЗАПРАШИВАЕМЫХПАРАМЕТРОВ ), ",", "" ) + "''DMTRADE_ИМЯБАЗЫДАННЫХ''";	/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##///загрузим настройки из БД/##CHR(13)##//##CHR(10)##/DMTRADE_DBDRIVER	= RESTAPI.DMTRADE_ЗагрузитьПараметрСоединения( "DBDRIVER", КОДОБОРУДОВАНИЯ );/##CHR(13)##//##CHR(10)##///если драйвер не указан, то используем native client 11/##CHR(13)##//##CHR(10)##/IF ( ПУСТО( DMTRADE_DBDRIVER ) )/##CHR(13)##//##CHR(10)##/	DMTRADE_DBDRIVER = "SQL SERVER Native Client 11.0";/##CHR(13)##//##CHR(10)##/	/##CHR(13)##//##CHR(10)##/DMTRADE_DBSERVER	= RESTAPI.DMTRADE_ЗагрузитьПараметрСоединения( "DBSERVER", КОДОБОРУДОВАНИЯ );	/##CHR(13)##//##CHR(10)##/DMTRADE_DBPORT 		= VAL( RESTAPI.DMTRADE_ЗагрузитьПараметрСоединения( "DBPORT", КОДОБОРУДОВАНИЯ ) );/##CHR(13)##//##CHR(10)##/DMTRADE_DBUSER 		= RESTAPI.DMTRADE_ЗагрузитьПараметрСоединения( "DBUSER", КОДОБОРУДОВАНИЯ );/##CHR(13)##//##CHR(10)##/DMTRADE_DBPASSWORD 	= RESTAPI.DMTRADE_ЗагрузитьПараметрСоединения( "DBPASSWORD", КОДОБОРУДОВАНИЯ );/##CHR(13)##//##CHR(10)##/DMTRADE_DBNAME 		= RESTAPI.DMTRADE_ЗагрузитьПараметрСоединения( "DBNAME", КОДОБОРУДОВАНИЯ );/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/ОТПРАВИТЬСООБЩЕНИЕ( _ГЛАВНОЕОКНОПРИЛОЖЕНИЯ, _СООБЩЕНИЕВЫПОЛНИТЬКОМАНДУ, "ЗАПРОСПАРАМЕТРОВ", СПИСОКЗАПРАШИВАЕМЫХПАРАМЕТРОВ );/##CHR(13)##//##CHR(10)##/IF ( !_РЕЗУЛЬТАТВВОДАПАРАМЕТРОВ )/##CHR(13)##//##CHR(10)##/	RETURN false;/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##///если поле драйвера оставили пустым, то используем native client 11/##CHR(13)##//##CHR(10)##/DMTRADE_DBDRIVER	= ЕСЛИ( ПУСТО( DMTRADE_ДРАЙВЕРСУБД ), "SQL SERVER Native Client 11.0", DMTRADE_ДРАЙВЕРСУБД );	/##CHR(13)##//##CHR(10)##/DMTRADE_DBSERVER	= DMTRADE_СЕРВЕРБАЗЫДАННЫХ;	/##CHR(13)##//##CHR(10)##/DMTRADE_DBPORT = DMTRADE_ПОРТСЕРВЕРАБАЗЫДАННЫХ;/##CHR(13)##//##CHR(10)##/DMTRADE_DBUSER = DMTRADE_ПОЛЬЗОВАТЕЛЬСЕРВЕРАБАЗЫДАННЫХ;/##CHR(13)##//##CHR(10)##/DMTRADE_DBPASSWORD = DMTRADE_ПАРОЛЬСЕРВЕРАБАЗЫДАННЫХ;/##CHR(13)##//##CHR(10)##/DMTRADE_DBNAME = DMTRADE_ИМЯБАЗЫДАННЫХ;/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##///перезапишем в БД значения параметров/##CHR(13)##//##CHR(10)##/RESTAPI.DMTRADE_СохранитьПараметрСоединения( "DBDRIVER", DMTRADE_DBDRIVER, КОДОБОРУДОВАНИЯ );/##CHR(13)##//##CHR(10)##/RESTAPI.DMTRADE_СохранитьПараметрСоединения( "DBSERVER", DMTRADE_DBSERVER, КОДОБОРУДОВАНИЯ );/##CHR(13)##//##CHR(10)##/RESTAPI.DMTRADE_СохранитьПараметрСоединения( "DBPORT", DMTRADE_DBPORT, КОДОБОРУДОВАНИЯ );/##CHR(13)##//##CHR(10)##/RESTAPI.DMTRADE_СохранитьПараметрСоединения( "DBUSER", DMTRADE_DBUSER, КОДОБОРУДОВАНИЯ );/##CHR(13)##//##CHR(10)##/RESTAPI.DMTRADE_СохранитьПараметрСоединения( "DBPASSWORD", DMTRADE_DBPASSWORD, КОДОБОРУДОВАНИЯ );/##CHR(13)##//##CHR(10)##/RESTAPI.DMTRADE_СохранитьПараметрСоединения( "DBNAME", DMTRADE_DBNAME, КОДОБОРУДОВАНИЯ );/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/_РЕЗУЛЬТАТВВОДАПАРАМЕТРОВ = false;/##CHR(13)##//##CHR(10)##///если параметры связи с БД не определены, то не выполняем запросов к БД DM/##CHR(13)##//##CHR(10)##/IF ( ПУСТО( DMTRADE_DBSERVER ) OR ПУСТО( DMTRADE_DBUSER ) OR ПУСТО( DMTRADE_DBPASSWORD ) OR ПУСТО( DMTRADE_DBNAME ) )/##CHR(13)##//##CHR(10)##/	RETURN true;/##CHR(13)##//##CHR(10)##/	/##CHR(13)##//##CHR(10)##///проверим соединение с БД/##CHR(13)##//##CHR(10)##/РезультатПроверки = RESTAPI.DMTRADE_ПроверитьСоединениеСБД( КОДОБОРУДОВАНИЯ, true );/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##///получим список устройств с сервера/##CHR(13)##//##CHR(10)##/IF ( ! RESTAPI.DMTRADE_ПроверитьПараметрСистемы( "DMTRADE_ИДУСТРОЙСТВА" ) )/##CHR(13)##//##CHR(10)##/	RETURN false;/##CHR(13)##//##CHR(10)##/ELSE/##CHR(13)##//##CHR(10)##/	СПИСОКЗАПРАШИВАЕМЫХПАРАМЕТРОВ = "''DMTRADE_ИДУСТРОЙСТВА''";/##CHR(13)##//##CHR(10)##/	/##CHR(13)##//##CHR(10)##/IF ( RESTAPI.DMTRADE_ПолучитьДанныеИзБД( КОДОБОРУДОВАНИЯ, "SELECT ID, CONVERT( binary, Name ) AS NAME, CONVERT( binary, SN ) AS SN, TimeLastSync FROM Devices", "Таблица устройств", true ) )/##CHR(13)##//##CHR(10)##/{/##CHR(13)##//##CHR(10)##/	//создадим временную таблицу с мобильными устройствами, в которую запишем все полученные из БД DM устройства для их последующего выбора/##CHR(13)##//##CHR(10)##/	DMTRADE_ИмяТаблицыУстройств = "##DMTRADE_Devices";/##CHR(13)##//##CHR(10)##/	ЗАПРОС ( "IF object_id( ''tempdb.." + DMTRADE_ИмяТаблицыУстройств + "'' ) is not null DROP TABLE " + DMTRADE_ИмяТаблицыУстройств );/##CHR(13)##//##CHR(10)##/	ЗАПРОС ( "CREATE TABLE " + DMTRADE_ИмяТаблицыУстройств + " ( ID int, Name nvarchar(100), SN nvarchar(100), TimeLastSync datetime )" );/##CHR(13)##//##CHR(10)##/	/##CHR(13)##//##CHR(10)##/	ВЫБРАТЬКОНТЕКСТ( "DMTRADE_DATATABLE" );	/##CHR(13)##//##CHR(10)##/	WHILE ( !КОНЕЦКОНТЕКСТА( "DMTRADE_DATATABLE" ) )/##CHR(13)##//##CHR(10)##/	{/##CHR(13)##//##CHR(10)##/		ЗАПРОС("INSERT INTO " + DMTRADE_ИмяТаблицыУстройств + " ( ID, Name, SN, TimeLastSync )/##CHR(13)##//##CHR(10)##/					VALUES ( " + STR( DMTRADE_DATATABLE.ID, 10, 0 ) + ",''" + /##CHR(13)##//##CHR(10)##/					STDF( ПЕРЕКОДИРОВАТЬ( DMTRADE_DATATABLE.Name, ''Unicode'', ''ANSI'' ), 100 ) + "'',''" + /##CHR(13)##//##CHR(10)##/					STDF( ПЕРЕКОДИРОВАТЬ( DMTRADE_DATATABLE.SN, ''Unicode'', ''ANSI'' ), 100 ) + "'',''" + /##CHR(13)##//##CHR(10)##/					DMTRADE_DATATABLE.TimeLastSync + "'' )");/##CHR(13)##//##CHR(10)##/		ПРОПУСТИТЬ( 1, "DMTRADE_DATATABLE" );/##CHR(13)##//##CHR(10)##/	}/##CHR(13)##//##CHR(10)##/	УДАЛИТЬКОНТЕКСТ( "DMTRADE_DATATABLE" );/##CHR(13)##//##CHR(10)##/	/##CHR(13)##//##CHR(10)##/	//загрузим настройку с выбранным ИД устройства из БД/##CHR(13)##//##CHR(10)##/	DMTRADE_DEVICEID 		= RESTAPI.DMTRADE_ЗагрузитьПараметрСоединения( "DEVICEID", КОДОБОРУДОВАНИЯ );/##CHR(13)##//##CHR(10)##/	/##CHR(13)##//##CHR(10)##/	//выведем запрос параметров с выбором устройства для привязки к оборудованию/##CHR(13)##//##CHR(10)##/	ОТПРАВИТЬСООБЩЕНИЕ( _ГЛАВНОЕОКНОПРИЛОЖЕНИЯ, _СООБЩЕНИЕВЫПОЛНИТЬКОМАНДУ, "ЗАПРОСПАРАМЕТРОВ", СПИСОКЗАПРАШИВАЕМЫХПАРАМЕТРОВ );/##CHR(13)##//##CHR(10)##/	IF ( !_РЕЗУЛЬТАТВВОДАПАРАМЕТРОВ )/##CHR(13)##//##CHR(10)##/		RETURN false;/##CHR(13)##//##CHR(10)##/	/##CHR(13)##//##CHR(10)##/	//сохраним параметр в базе/##CHR(13)##//##CHR(10)##/	DMTRADE_DEVICEID = DMTRADE_ИДУСТРОЙСТВА;	/##CHR(13)##//##CHR(10)##/	RESTAPI.DMTRADE_СохранитьПараметрСоединения( "DEVICEID", DMTRADE_DEVICEID, КОДОБОРУДОВАНИЯ );	/##CHR(13)##//##CHR(10)##/}/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/RETURN true;',0,0,0,0,'10.11.2023 11:37:38')
#command INSERT INTO speceqprofiles (CODE,ACTION_ID,ACTION_SCRIPT,F_CHECK,FARC,UPDATED,RECEIVED,EDIT_DAT) VALUES ('----------',19.00000000,'//Имя устройства ТСД/##CHR(13)##//##CHR(10)##/ИМЯУСТРОЙСТВА = "DataMobile: Мобильная торговля";/##CHR(13)##//##CHR(10)##//##CHR(13)##//##CHR(10)##/RETURN ИМЯУСТРОЙСТВА;',0,0,0,0,'10.11.2023 11:37:38')
#command INSERT INTO speceqprofiles (CODE,ACTION_ID,ACTION_SCRIPT,F_CHECK,FARC,UPDATED,RECEIVED,EDIT_DAT) VALUES ('----------',20.00000000,'//Количество устройств ТСД/##CHR(13)##//##CHR(10)##/RETURN 1;',0,0,0,0,'10.11.2023 11:37:38')
#command INSERT INTO spreqprofiles (CODE,EX_CODE,NAME,TYPE,PORT,NOTE,PARENT,POSORDER,NOTAVAIL,MAINDB,MAINIC,CACCESS,TACCESS,FOLDER,RID,FARC,UPDATED,RECEIVED,EDIT_DAT) VALUES ('','','Профиль DataMobile Мобильная торговля','ТСД',0.00000000,'',0.00000000,7580.00000000,0,'',0.00000000,'','',0,'BB8A38B8-CBF9-421C-A625-0B792FEA2852',0,1,0,'10.11.2023 11:37:38')
