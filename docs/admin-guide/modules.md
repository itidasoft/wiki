---
title: Формы и модули
description: Руководство администратора
published: true
date: 2022-08-14T13:47:54.933Z
tags: обмен, мрп, генерация шк, печать шк, оперативная сводка
editor: markdown
dateCreated: 2022-08-14T11:32:55.524Z
---

# Форма «Оперативная сводка»

В системе Айтида полностью унифицированы процедуры загрузки данных из оборудования со стандартными формами обмена данными с оборудованием. **«Форма оперативной сводки по ККМ версия 2»** поддерживает работу с ККМ, использующими профили обработки и не использующие их. Так же есть возможность работать с ФР и принтерами чеков, работающими в форме регистрации продаж.

**Меню Оперативная сводка - Оперативная сводка по ККМ (v.2)**

![Изображение выглядит как стол Автоматически созданное описание](/images/admin-guide/modules/567885a05e7e96f796a82234b6e04fc5.png)

Загрузка данных может производиться либо для конкретной ККМ (выделенной в левой части окна), либо для всего склада,. При загрузке данных используются стандартные процедуры отправки файлов флагов, доставки файлов с данными и прочие процедуры. Оперативная сводка запрашивает данные о времени продаж начиная с даты указанной на закладке **«Загрузка данных»** в карточке торгового оборудования, в поле **«Дата и время последней загрузки данных»**. При запросе данных для оперативной сводки значение данного поля не изменяется.

![](/images/admin-guide/modules/1f4bd3a768ecb4435796bbce87955862.png)

> **Внимание!** **Служба Айтиды** может загружать дату последней загрузки данных и тогда, эта дата будет изменяться, каждый раз при запуске **«Формы оперативной сводки по ККМ версия 2».**
{.is-warning}


![Изображение выглядит как стол Автоматически созданное описание](/images/admin-guide/modules/85af7689d4a749c3e80eceb014cb54af.png)

В форме предусмотрены две вкладки.

1.  На вкладке **«Остатки товаров с учетом продаж»** - отображается список товаров, в котором из них можно увидеть остатки на складе за минусом выбранных продаж.
2.  На вкладке **«Продажи товаров»** - только продажи по выбранному складу или конкретной ККМ.

![Изображение выглядит как текст, стол Автоматически созданное описание](/images/admin-guide/modules/fbaffc2e3dcb6d34ac759b125e377ff2.png)

Остатки товаров могут быть выведены для всех товаров на складе, выбранных товаров или только тех, которые были проданы на складе/ККМ.

Предусмотрена группировка выводимых данных по папкам товаров, группам товаров или без группировки. Так же предусмотрен вывод на печать текущего списка товаров.

Для добавления **«Оперативной сводки по ККМ»** в меню необходимо указать в поле **«Команда»** текст: `DO FORM repKKM_ex`

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/b98cf0251dbbbe0db43c5559f79e390a.png)

# Форма «Генерация и печать штрих-кодов»

В системе Айтида штрих-код для каждого товара можно ввести вручную или при помощи сканера штрих-кода. Помимо этого предоставляется возможность сгенерировать собственный штрих-код на основе шаблона штрих-кода, созданного для выбранной **«Единицы измерения»** товара.

> **Внимание!** Во избежание ошибок при чтении ШК похожих по шаблону, но другой длины, **включена проверка длины штрихового кода** и длины шаблона. В случае использования более коротких шаблонов ШК **добавить в шаблон 6 контрольных символов**. Эти символы игнорируются при анализе прочитанного ШК.
{.is-warning}


## Работа в форме «Генерация и печать штрих-кодов»

При работе в форме **«Генерация и печать штриховых кодов»** необходимо, чтобы для единицы измерения был создан шаблон штрих-кода. В справочнике товаров выбран диапазон товаров.

![](/images/admin-guide/modules/ccc3cdde7ab5974aba22624fa45f204e.png)

Раскрыть на панели инструментов справочника выпадающий список **«Дополнительные возможности»** и выбрать **«Работа со штрих-кодами»** и в открывшемся окне перейти, к примеру, на вкладку **«Весовой товар»**.

В колонке **«Вес»** (в принятой единице измерения) ввести произвольное значение веса товара либо считать его из весов.

> **Внимание!** Имеется возможность в форме **«Генерация и печать штрих-кодов»** считать значение веса из весов.
{.is-warning}


В форме можно генерировать штрих-код для определенной группы товаров, по остаткам на складе и на выбранном складе.

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/aaa669dfbe25721166e462f8aac96754.png)

> **Примечание.** Если у товара единица измерения килограмм, то нельзя указывать количество в граммах. Если взвешено 200г, а единица измерения килограмм, то в поле количество необходимо указать 0.200.
{.is-info}


Отметить товарные позиции и нажать кнопку **«Сгенерировать штрих-коды»**, после чего в колонке **«Штрих-код»** для каждого товара отобразится сгенерированный штрих-код, соответствующий шаблону штрих-кода для данной единицы измерения.

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/d19f0de68dceff0165df8efc4898efce.png)

В приведенном примере были сгенерированы штрих-коды для товаров с произвольным значением в колонке с весом, для другого значения веса штрих-код будет другим.

Сгенерированные штрих-коды можно распечатать нажатием кнопки **«Напечатать штрих коды»** и выбрать отчетную форму или вызвать **«Справочник отчетных форм»** кнопкой **«Выбрать отчетную форму»**. В дальнейшем выпадающий список кнопки печати будет заполняться.

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/47589605d4a638dd036b2d8408659b30.png)

> Примечание! Для генерации штрих-кодов всех товаров, указанных в справочнике ТМЦ нужно выбрать группу **«Штучный товар**», или **«Весовой товар»**, а затем нажать кнопку **«Сформировать список»**.
{.is-success}


### Шаблон ШК для Единицы Измерения

В системе Айтида можно сгенерировать штрих-код для товара по шаблону, используя его реквизиты: код, артикул, количество. Шаблоны штрих-кода, создаются в карточках **«Единиц измерения»**.

1.  Для создания шаблона штрих-кода нажать кнопку **«Выбрать или создать шаблон штрихового кода»**.

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/21288cddf6419dae3e61af8f0e443191.png)

2.  В открывшемся окне «**Ввод шаблона штрих-кода»** выбрать для использования шаблон, созданный ранее для другой единицы измерения, либо сформировать новый шаблон.

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/6f0fc54015a2e7776626a21dc0dd4d59.png)

3.  Новый шаблон создается выбором из выпадающего списка **«Использовать существующий шаблон»** пункта **«Не выбран»**, после этого станет доступным для ввода поля **«Ввести новый шаблон».**

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/9653ba471597270bae61a22d3a9e1170.png)

4.  Указать префикс штрих-кода, который будет оставаться неизменным для всех штрих-кодов, сгенерированных по данному шаблону. Наличие префикса не обязательно. Указать параметры (реквизиты ТМЦ), которые будут изменяться в зависимости от выбранного товара.
5.  После выбора количества знаков для каждого параметра нажать на кнопку **«Записать»**.

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/4da7a2fe55a53fb9b4a0037508cb26dc.png)

-   **Код —** во время генерации штрих-кода будет автоматически подставлен код ТМЦ из карточки ТМЦ (код в главной базе).
-   **Артикул** **—** во время генерации штрих-кода будет автоматически подставлен артикул товара из карточки ТМЦ.
-   **Количество —** используется для автоматического добавления в штрих-код количества весового товара.
-   **Контрольный символ** **—** используется для исключения ошибок при передаче данных сканером. Выбрав необходимый параметр, указать количество знаков, которое будет отводиться в штрих-коде для данного параметра.
-   **Поле «Текущая длина кода»** **—** отображает суммарное количество знаков шаблона.

> **Внимание!** Во избежание ошибок при чтении ШК похожих по шаблону, но другой длины, **включена проверка длины штрихового кода** и длины шаблона. В случае использования более коротких шаблонов ШК можно **добавить в шаблон 6 контрольных символов**. Эти символы игнорируются при анализе прочитанного ШК.
{.is-warning}

> **Примечание!** Необходимо отводить для каждого параметра такое количество знаков, чтобы параметр мог полностью отобразиться в штрих-коде. Например, если код ТМЦ – четырёхзначное число, то в шаблоне необходимо отвести под код количество знаков не менее четырёх. Неиспользуемые начальные знаки просто заполнятся нулями.
{.is-info}

> **Внимание!** Если для выбранной единицы измерения стоит флаг **«Единица измерения веса»**, то товары с этой единицей измерения будут относиться к группе весовых товаров, если галочка не стоит, то товар будет входить в группу штучные товары.
{.is-info}

> **Внимание!** У разных единиц измерения шаблоны штрих-кода должны различаться (хотя бы префиксом).
{.is-success}


### Ввод ШК вручную или с помощью сканера

Ввод штрих-кода вручную или с помощью сканера штрих-кода можно в форме **«Штрих-коды ТМЦ»**, которая открывается из карточки ТМЦ на вкладке **«Основные реквизиты»** в поле **«Штриховые коды»**.

![](/images/admin-guide/modules/546ccebfe9814ee7121fdd96a5c55b2b.png)

1.  Кнопка «**Ввести штрих-код вручную»** позволяет открыть окно ввода штрих-кода, необходимо ввести цифровой код или считать его сканером и нажать кнопку **«Выполнить»**.

![ввод серийного номера Шк.PNG](/images/admin-guide/modules/8cdffe63a613f4315d656d1dc32954d6.png)

2.  Введённый штрих-код добавится в список штрих-кодов данного товара

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/eb60cbee385524327cb434a52d392399.png)

3.  Если нажать кнопку **«Сгенерировать штрих-код»**, то система автоматически сгенерирует штрих-код, соответствующий заполненному полю **«ЕИ»**.

![](/images/admin-guide/modules/4e51653252d54dc5f6b087e8340baa25.png)

# Форма «Распределение товара по складам»

Форма **«Распределение товара по складам»** необходима для облегчения работы товароведа (кладовщика) при распределении товара с выбранного склада по складам филиалов. Обычно такая задача возникает при получении партии товара от поставщика и необходимости полученный товар перераспределить по магазинам, периодическом распределении остатков центрального склада по магазинам, отправки партии товара с центрального склада в филиал, и т.п.

**Меню Документы – Распределение товара**

![Изображение выглядит как стол Автоматически созданное описание](/images/admin-guide/modules/819b6ba21888d7ef3984ced22492d813.png)

Также форма **«Распределение товара по складам»** может быть открыта из документов кнопкой обмена данными с оборудованием.

![](/images/admin-guide/modules/159ae8972065734cb74779d8d13a0c64.png)

При необходимости настройки формы **«Распределение по складам»** можно воспользоваться кнопкой **«Настройка»**.

![Изображение выглядит как стол Автоматически созданное описание](/images/admin-guide/modules/623189dab6fb4bcb203a73beaddfea15.png)

Кроме того, начиная с версии **ПП Айтида 2.99.35** в справочник отчетных форм добавлена новая отчетная форма **«Распределение по складам**», которая может быть настроена в список печатных форм формы.

![Изображение выглядит как стол Автоматически созданное описание](/images/admin-guide/modules/9e6926963dcf78b46072e18dd1f7ed54.png)

Пользуясь формой **«Распределение по складам**», товаровед задает необходимое количество товара, которое необходимо переместить с выбранного склада на каждый из складов списка.

Также товароведом задается количество товара, которое находиться в филиале, то есть определяются **«Нормы хранения»** для ТМЦ.

> Примечание! «Норма хранения» – это количественная величина товара, которая должна находиться на складе после пополнения товарного запаса и определяется товароведом самостоятельно.
{.is-info}


**«Норма хранения»** указывается в форме **«Реквизиты ТМЦ в разрезе филиалов»** и для того, чтобы произвести настройки в этой форме необходимо в карточке ТМЦ на вкладке **«Цены, комплектация, доп. информация»** нажать  кнопку **«Реквизиты по филиалам»**.

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/3319930703e485db85fe499099754836.png)

В Форме **«Распределение товара по складам»** необходимо указать **«Склад списания»**, выбрать один или несколько складов получателей в поле **«Выбор складов»** и добавить товары, которые будут участвовать в распределении.

![Изображение выглядит как стол Автоматически созданное описание](/images/admin-guide/modules/d8662287c16a48f161a8d9b62dcf2709.png)

При этом колонка **«К распределению»** будет соответствовать остатку товара на складе списания.

![](/images/admin-guide/modules/91919d6a7bed8fadd01b714257d94fbf.png)

Колонки **«Перемещение»** (по каждому из складов списка) будет соответствовать количеству товара, которое необходимо переместить на указанный склад.

Колонка **«Не распределено»** будет соответствовать значению за вычетом колонки **«Перемещение»** из колонки **«К распределению»**.

![Изображение выглядит как стол Автоматически созданное описание](/images/admin-guide/modules/7db31b220d0fde3b61ad8a497c4fcba4.png)

Колонки **«Норма»** (по каждому из складов списка) будет соответствовать **«Норме хранения»** товара из карточки ТМЦ. Колонки **«Остаток»** (по каждому из складов списка) будет соответствовать остатку товара на соответствующем складе получателе после проведения созданных документов. Работа товароведа сводится к заполнению колонок **«Перемещение»** (по каждому из складов списка).

Как только заполнение всех полей таблицы завершено, необходимо нажать кнопку **«Распределить»**. Результатом работы, будут служить сформированные (но не проведенные) накладные на **«Внутренние перемещения»**.

> Примечание! Количество накладных будет равно количеству складов, на которые необходимо переместить товар.
{.is-info}


Для автоматизации процесса служит скрипт, который можно настроить с помощью одноименной кнопки **«Настройка»** для его выполнения используется кнопка **«Автоматическое распределение»**.

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/76dc90b5df165e731aba9e813bd5da23.png)

Данный скрипт в соответствии с алгоритмом, равномерно распределяет товар по выбранным складам, исходя из значения, полученного за вычетом колонки **«Норма»** из колонка **«Остаток»**, если такая потребность \>0.

> Внимание! Данные формы не сохраняются. После повторного открытия формы, последняя будет очищена.
{.is-warning}


В **«Параметрах формы распределения товаров по складам»** можно указать печатные формы, которые будут выводиться на печать при нажатии на соответствующую кнопку из формы распределения товаров. Произвести настройки отображения таблицы формы и цветового отображения строк.

![](/images/admin-guide/modules/9cf5aac2b11b9bf40845c58f3bd0f83c.png)

# Модуль обмена данными

Программный продукт «Айтида: Модуль обмена данными» предназначен для автоматизации территориально распределенных торговых сетей в тех случаях, когда между торговыми объектами не существует постоянной выделенной линии надлежащего качества и on-line подключение невозможно.

## Назначение

Серия программ **«Айтида Retail»** являются клиент-серверными приложениями с использованием специализированного сервера MS SQL, в архитектуре хранения данных, база каждого удаленного подразделения хранится в центральном офисе отдельно.

Модуль центрального офиса позволяет выгрузить в файл данные из собственной базы данных, а также загрузить информацию из файла, выгруженного модулем удаленного филиала. Аналогичные функции выполняет модуль удаленного филиала, что не требует для синхронизации данных постоянного высокоскоростного подключения. Данные могут поступать по любым каналам связи (на дискетах, электронным письмом и другими).

Базы данных разных филиалов не только хранятся отдельно, но и могут располагаться на разных серверах. В процессе увеличения количества филиалов не обязательно увеличивать мощность центрального сервера – достаточно установить один или несколько серверов для копий баз новых филиалов. Выборка данных происходит одновременно из нескольких баз данных, что не увеличивает время получения результата с ростом числа филиалов. Периодическая синхронизация баз данных между центральным офисом и удаленными филиалами реализуется с помощью **«Модуля обмена данными»**.

Программный продукт **«Айтида: Модуль обмена данными»** предназначен для автоматизации территориально распределенных торговых сетей в тех случаях, когда между торговыми объектами не существует постоянной выделенной линии надлежащего качества и **«on-line»** подключение невозможно.

> **Внимание!** Для обеспечения возможности автоматического обмена информацией об оборотах накопленных на дисконтных картах в торговой сети можно воспользоваться инструкцией, которая описывает процесс настройки **ПП Айтида** и ее можно скачать с сайта [itida.ru](http://itida.ru/download/docs/discount_cards_turnove_in_branch_network.pdf).
{.is-warning}


**«Айтида: Модуль обмена данными»** синхронизирует информационные базы данных распределенных филиалов и (или) центрального офиса сети. Модуль позволяет пользователям удаленных подразделений оперативно получать управленческие директивы, и в свою очередь, предоставляет сотрудникам центрального офиса оперативную информацию о деятельности всех торговых объектов сети.

**«Айтида: Модуль обмена данными»** обладает рядом преимуществ:

1.  Настройка маршрутов миграции данных:
2.  Настройка миграционных фильтров (правила частичной передачи информации справочников и документов).
3.  Возможность централизованного, децентрализованного управления ассортиментом, заказами и поставками, в том числе, через центральные склады – распределители торговых сетей;

Поддерживаемые типы обмена:

Между центральным офисом и филиалами.

Между центральным офисом и филиалами, а также филиалами между собой.

Через региональный сервер.

Между филиалами.

Программный продукт **«Айтида: Модуль обмена данными»** полностью совместим с программным продуктом **«Айтида: Консолидация данных»**.

**«Модуль консолидации Данных»** работает в центральном офисе, осуществляет выборку данных, которые необходимы пользователю, автоматически определяя, в какой из баз они физически находятся.

**«Модуль консолидации Данных»** использует специальную технологию для организации хранения данных в центральном офисе распределенной сети. Благодаря этой технологии, скорость работы пользователей в центральном офисе и время выполнения процедуры обмена данными с филиалами (наиболее критические места большинства других систем) практически не зависит ни от количества торговых объектов в сети, ни от периода обмена данными с ними.

Технология фактически позволяет иметь **«копию»** базы данных филиала в центральном офисе. Именно в эту копию, а не в **«общую базу»**, как в большинстве других приложений, загружаются обновленные данные из филиала. Это позволяет достичь большей надежности хранения данных, свести к минимуму риск их повреждения или потери в случае возникновения неполадок в работе компьютерной сети, а также уменьшить простои системы.

> Внимание! Реализовать создание базы-копии центрального офиса можно с помощью приложения IRestireDB.exe. Флаг «Установить как базу-копию» должен быть обязательно включен!
{.is-warning}


![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/1e7570efc0d043a3ea93f8e6bcd5c43a.png)

Помимо обеспечения высокой скорости работы на больших объемах данных, **«Модуль консолидации Данных»** предоставляет преимущества для работы программного продукта одновременно с несколькими базами данных (даже если они находятся на различных серверах.

> Примечание! «Модуль консолидации данных» доступен для всех конфигураций, кроме «Малый бизнес». При необходимости, можно приобрести Модуль Консолидации отдельно.
{.is-info}


## Настройка «Шаблона правил обмена»

Использование **«Шаблонов обмена данными»** между филиалами позволяет максимально гибко настраивать процедуры обмена данными между различными филиалами предприятия. В системе Айтида предусмотрено два варианта обмена данными между филиалами.

1.  **Передача всех данных из филиала в базу – копию**, находящуюся в центральном офисе.

В этом случае передаются все данные из всех таблиц системы Айтида из рабочей базы данных филиала в базу–копию в центре. Данный вариант обмена рассматриваться в качестве примера не будет.

1.  **Передача данных из центрального офиса в филиал или из филиала в другой филиал** данных по определенному шаблону обмена данными.

Для настройки обмена данными по второму варианту используется **«Справочник шаблонов обмена данными»**.

**Меню Модуль консолидации - Шаблоны правил обмена**

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/6476a56e12234a219f8df3a2da5b4142.png)

В карточке **«Шаблона обмена данными»** перечисляются типы документов и справочников, которые необходимо передавать в другой филиал. В виду того, что информация документов и справочников хранится не в одной таблице, а во многих, при описании правил обмена необходимо указывать то, как будут передаваться связанные таблицы.

Второй вопрос, который необходимо решить при настройке **«Шаблонов обмена данными»** – это правила, по которым должны перекодироваться реквизиты документов и справочников, содержащие ссылки на другие справочники. Для того, чтобы система могла определить эти правила, который описывает обмен, должны присутствовать все справочники, у которых в разных филиалах могут внутренние коды различаться, они могут и не передаваться,

Например, справочник ТМЦ, если схема работы допускает ввод информации в этот справочник в нескольких филиалах, то добавление этого справочника во все шаблоны, которые содержат товарные документы **обязательно**.

> Внимание! Следует иметь в виду, что далеко не все шаблоны могут быть изменены после начала работы и первого обмена данными.
{.is-warning}


Например, если создан шаблон, в котором указано, что контрагенты должны синхронизироваться по ИНН, то потом изменить это правило на использование единого кода уже не получится, т.к. внутренние коды карточек контрагентов в разных филиалах будут уже разные. С другой стороны, обратная операция вполне возможна. Если справочник изначально был полностью синхронизирован и во всех филиалах был использован единый код, это значит, что новые карточки контрагентов всегда вводились только в одном филиале, то разрешить ввод новых контрагентов в нескольких филиалах с указанием правила синхронизации вполне возможно. При этом необходимо внести изменения во все шаблоны, использующие справочник контрагентов. Более того, если в каких либо шаблонах данный справочник не был указан, но были документы содержащие поле **«Контрагент»**, то в эти шаблоны необходимо будет добавить этот справочник с указанием правила синхронизации.

> Внимание! Следует внимательно относиться к описанию правил обмена связанных таблиц. Не все таблицы должны передаваться, а только те которые необходимы в конкретном случае. Все правила, по которым передаются связанные таблицы, содержатся в системе и не требуют настройки, поэтому достаточно указать на необходимость передачи и приема этих данных.
{.is-warning}


> Внимание! Документы передаются не проведенными. Проведение должно осуществляться в принимающем филиале! Если документ передается повторно, а в принимающем филиале он уже проведен, то документ не будет изменен. Система оповестит пользователя о возникшей ситуации.
{.is-warning}


> Примечание! Все документы синхронизируются по полям maindb и mainic в таблице spr000. Эти поля заполняются автоматически при добавлении записей в таблицу spr000. Поэтому, изменение кода текущего филиала в процессе работы приведет к проблемам в осуществлении обмена данными.
{.is-info}

> Примечание! Справочники, для которых не указаны какие либо правила синхронизации синхронизируются по полям maindb и mainic таблицы sprmain.
{.is-info}


**Кнопка «С» (добавить справочники в список) —** позволяет выбрать необходимые справочники и добавить их в список. При этом все связанные таблицы добавляются в список автоматически.

**Кнопка «Д» (добавить документы в список) —** позволяет выбрать необходимые документы и добавить их в список. При этом все связанные таблицы добавляются в список автоматически.

**Кнопка «Удалить объект из списка» —** позволяет удалить выделенный объект из списка. При этом, может быть удален только целиком документ или справочник. Связанные таблицы по отдельности удалены быть не могут.

**Переключатель «Для общего обмена», «Документ», «Справочник» —** если переключатель установлен в положение «Для общего обмена», то шаблон будет доступен только в форме «Обмен данными» и для выбора в карточке групп филиалов. Если переключатель установлен в положение «Документ», то необходимо выбрать тип документа, в журнале которого будет доступен данных шаблон обмена. Если переключатель установлен в положение «Справочник», то необходимо выбрать тип справочника, в списке которого будет доступен данный шаблон обмена.

**Выгрузка данных —** переключатель «Передавать» указывает, надо ли передавать объекты данного типа в другой филиал. Установка реквизита в значение «Не передавать», исключит объект из обмена, но сохранит все его настройки.

**Поле «Условие» —** поле может содержать выражение, значение которого будет являться условием для выборки передаваемых данных. Если обмен данными производится из журнала документов или списка справочника, то необходимо указывать условие, ограничивающее выборку только необходимыми, отмеченными в списке, объектами. Если обмен производится из формы обмена данными, то к указанному условию будет добавлено условие из формы обмена – либо данные за указанный период, либо новые данные.

**Передавать целиком —** признак доступен только для справочников и указывает системе, что объект всегда передается целиком (все записи, содержащиеся в справочнике), вне зависимости от указанных условий.

**Загрузка данных —** переключатель «Принимать» указывает системе, в каких случаях осуществлять прием данных. Данные могут быть выгружены, но их не обязательно надо принимать. Возможные значения реквизита: «Принимать, при отсутствии такого же» **—** означает, что если в базе-приёмнике нет такого объекта (поиск «такого же» производится по выражению синхронизации), то объект будет загружен в базу приёмник. Иначе нет. Значение «Принимать всегда» **—** означает, что объект будет загружен в базу приёмник всегда. Все изменения, которые были внесены в филиале, будут отменены.

**Очищать перед загрузкой —** признак доступен только для справочников. Установка признака указывает системе на необходимость очищать содержимое справочника в базе приёмнике перед загрузкой данных.

**Флаг «Может редактироваться во всех филиалах» —** признак доступен только для справочников. Указывает системе, что необходимо определить условие синхронизации карточке справочников при вводе одинаковой информации в разных филиалах.

> Внимание! Если признак «Может редактироваться во всех филиалах» не установлен, то предполагается что ввод информации в справочник осуществляется в одном филиале, а синхронизация осуществляется по полям maindb и mainic в таблице sprmain.
{.is-warning}


**Поле «Синхронизировать по полю» —** позволяет выбрать поле справочника для синхронизации и добавить его в выражение синхронизации без написания кода, нажатием кнопки «Добавить поле в выражение синхронизации».

**Поле «Выражение синхронизации» —** значение заполняется автоматически при выборе поля для синхронизации и добавления его в выражение. При ручном вводе выражения необходимо учитывать специфику синтаксиса выражения.

> Внимание! В поле «Выражение синхронизации» данное выражение не вычисляется самостоятельно, а используется как часть общего выражения. Поэтому, например, если необходимо синхронизировать справочники по нименованию (поле name), то в этом выражении необходимо указать следующее: `name = '" + name + "'`.
{.is-warning}


**Флаг «Использовать единый код во всех филиалах» —** установка признака указывает системе, что синхронизация производится по внутреннему коду справочника в системе. При этом нет необходимости перекодировать значения полей ссылающихся на элементы этого справочника.

## Настройка филиалов - Центральный Филиал

> Внимание! Изначально рекомендуется проводить настройку на базе «Центрального филиала».
{.is-warning}


### Установка базы филиала, как базы копии в центре

Необходимо создать резервную копию (бэкап) базы данных работающего филиала и восстановить базу, как копию в центральном объекте, с помощью приложения **IRestireDB.exe**.

Флаг **«Установить как базу-копию»** должен быть обязательно включен.

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/0646c3060ded86cdf37842f704ff5c27.png)

### Справочник Филиалов

Справочник филиалов служит для загрузки информации о филиалах, подключенных к главному офису. Каждый филиал в системе должен иметь свой уникальный код. Как правило, центральный офис имеет код **«001»**. Все последующие коды (номера) присваиваются филиалам. Код филиала должен иметь одинаковый номер во всех базах филиалов.

> Внимание! Код филиала должен иметь одинаковый номер во всех базах филиалов.
{.is-warning}


**Меню Модуль консолидации – Настройка филиалов**

![2013-04-09_100612.png](/images/admin-guide/modules/891f8e1d0780b02640d43744132f3fb4.png)

В верхней части окна необходимо задать наименование объекта. В основной части окна есть несколько закладок.

> **Внимание!** Необходимо, чтобы в БД Центрального филиала и других филиалах коды филиала были одинаковыми! Для того, чтобы можно было указать требуемый код филиала, при создании новой карточки поле Код доступно для изменения.
{.is-warning}


### Вкладка «Серверы и базы данных»

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/cd43ec40307e76d0705c75ba9d771b2b.png)

**Код —** код филиала. В новой карточке доступен для заполнения.

**Дополнительный код —** используется для связи с другими системами, не обязателен для заполнения.

**Наименование —** официальное наименование филиала. Используется во всех окнах «Выбор филиала», вызываемых по нажатию одноименной кнопки, расположенной в других окнах («Журнал всех документов», «Переоценка ТМЦ» и др.)

**Имя/адрес сервера** — для локальной базы и сервера, предназначено для указания IP-адреса компьютера, на котором установлен SQL-сервер и имя сервера.

**Имя базы данных** — для локальной базы и сервера, предназначено для указания наименования рабочей базы данных.

**Имя базы Frontol** — для локальной базы и сервера.

**Имя/адрес сервера** — для удаленной базы и сервера. Предназначены для подключения к удаленной базе данных.

**Имя базы данных** — для удаленной базы и сервера, предназначенные для подключения к удаленной базе данных.

**Имя базы Frontol** — для удаленной базы и сервера, предназначенные для подключения к удаленной базе данных.

**Флаг «Использовать прямой доступ к удаленному серверу»** — если возможен прямой доступ к удаленному серверу (например сервер находится в сети), необходимо установить флаг.

### Вкладка «Способы доставки»

![2013-04-09_100805.png](/images/admin-guide/modules/245de374ef04e622d9842d8ef4279fdb.png)

> В МОД доступна возможность обмена данными между филиалами по почте, средствами почтового клиента, либо через FTP-сервер. Подробнее о настройке способов доставки см. в разделе [**Способы доставки данных**](/docs/admin-guide/directories/delivery-methods)**.**
{.is-info}


**Поля «Выберите способ доставки исходящих сообщений» и «Выберите способ доставки входящих сообщений»** — позволяет выбрать способ доставки исходящих/входящих сообщений (по электронной почте, FTP-серверу и т.п.). Способы доставки можно создать и настроить в «Справочнике способов доставки».

> *При обмене по электронной почте в Карточке филиала* **«Центр»** *карточки способа доставки данных направление «Отправка данных» настраивается, как правило, с адресом имени сервера SMTP. Для направления* **«Получение данных»** *настраивается с адресом имени сервера POP.*
{.is-info}

> *При обмене через FTP-сервер в Карточке филиала* **«Центр»** *карточки способа доставки данных направление* **«Отправка данных»** *содержит данные для входа на FTP-сервер.*
{.is-info}

> *В Карточке филиала* **«Филиал»** *карточки способа доставки данных направление* **«Отправка данных»** *и* **«Получение данных»** *указывается тот же способ доставки, что и в Карточке филиала* **«Центр».**
{.is-info}


### Вкладка «Файлы и каталоги»

![](/images/admin-guide/modules/b3f6275d5cad16fc79c066ad41daf1b5.png)

> **Примечание!** Отправка файла обновления из одного объекта в другой средствами МОД текущей версии не поддерживается.
{.is-info}

> Примечание! Обмен через «Файлы и каталоги» основной метод обмена между филиалами.
{.is-info}


**Каталог для обновления системы** — предназначено для указания каталога, в котором планируется хранить обновления системы.

**Каталог для выгрузки данных** — необходимо заполнить именем каталога, который будет предназначаться для создания файлов выгрузки.

**Каталог для загрузки данных** — необходимо заполнить именем каталога, в который будет скопирован файл с данными перед загрузкой.

**Поля «Шаблон файла для загрузки данных» и «Шаблон файла для выгрузки данных»** — необходимо заполнить шаблоном имени файла. Создать свой уникальный шаблон, а так же скопировать примеры шаблонной имен файлов, нажав на кнопку «Справка по формату шаблонов имен файлов».

**Кнопка «Справка по формату шаблонов имен файлов»** — вызов правки по формату шаблонов.

> На вкладке **«Файлы и каталоги»** обязательно заполнение полей **«Шаблон файла для загрузки данных»** и **«Шаблон файла для выгрузки данных»**.  Создать свой уникальный шаблон или заполнить поля примерами шаблонных имен файлов, скопировав их из диалогового окна, нажав на кнопку **«Справка по формату шаблонов имен файлов»** на этой же вкладке.
{.is-warning}

> **Внимание!** Необходимо, чтобы путь к **«Каталогу загрузки данных»** различался для **«Центрального филиала»** и **«Вспомогательного филиала»**.
{.is-warning}


### Вкладка «Прочее»

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/577b410bd296dd33de67c9c7cdbf8c0f.png)

**Флаг «Филиал является главным офисом»** — должен быть установлен ТОЛЬКО в карточке центрального офиса

**Флаг «База является архивной»** —  в текущей версии МОД не используется.

**Флаг «База является самостоятельным филиалом»** — должен быть установлен во всех карточках филиалов на всех объектах распределенной сети.

**Флаг «Не передавать кассовые транзакции в базу копию в центре» —** установка параметров для обмена с базой копией в центре, не передавать кассовые транзакции.

**Флаг «Не передавать журнал ошибок и сообщений в базу копию в центре» —** установка параметров для обмена с базой копией в центре, не передавать журнал ошибок и сообщений.

**Флаг «Не передавать историю изменений объектов системы в базу копию в центре» —** установка параметров для обмена с базой копией в центре, не передавать историю изменений объектов системы.

**Флаг «Не передавать настройки и параметры пользователей в базу копию в центре» —** установка параметров для обмена с базой копией в центре, не передавать настройки и параметры пользователей.

**Общая площадь —** указывается общая площадь филиала.

**Торговая площадь —** площадь торговых помещений магазина.

**Установочная площадь —** площадь занятая торговым оборудованием.

### Параметры системы

> Внимание! Основную настройку необходимо провести на вкладке «Настройки».
{.is-warning}


**Меню Параметры - Параметры системы**

### Вкладка «Настройки»

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/e22c018882899af57978fbe9372dfa03.png)

**Код филиала** — необходимо корректно указать данные - «Код филиала».

**Флаг «Текущий филиал является Главным офисом»** — должен быть установлен в филиале «Центр».

**Префикс документов** — дает возможность указать комбинацию символов, которая будет автоматически добавляться в номера всех документов, созданных в данном филиале.

**Коды филиалов входящих в рабочую базу** — должны совпадать с именем «Код филиала».

### Настройка правил обмена в Центральном филиале

В базе центрального офиса необходимо настроить основной шаблон обмена (Выгрузка из центра в филиалы)/ В справочнике шаблонов правил обмена необходимо откорректировать карточку **«Из центра в филиал (основной)»**.

**Меню Модуль консолидации - Шаблоны правил обмена – Основной. Выгрузка из центра в филиалы**

![2013-04-09_122958.png](/images/admin-guide/modules/e43693133e83e6997c0efb0965197a97.png)

Откроется окно «Карточка шаблона обмена данными».

> Все настройки в данном окне актуальны только для выбранного шаблона.
{.is-warning}


1.  В левой части окна доступен для выбора объект или параметр, который необходимо настроить, в правой части производится настройка правил обмена для выделенного объекта (параметра).

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/0f9453e2c930c84140225659a4778e03.png)

2.  В этом окне доступны для настройки правила и условия приема и передачи данных по каждому из объектов. В качестве объектов в данном окне фигурируют документы и справочники, зарегистрированные в базе данных.

![2013-04-09_123055.png](/images/admin-guide/modules/9d52f5303b27aa5bc7d7541d806a7c2d.png)

Необходимо откорректировать функции передачи Справочника Структур Справочников для обеспечения прав доступа пользователям филиала **«Филиал»**.

3.  В левой части окна найти в дереве каталога **«Справочники» - «Справочник структур справочников» - «Список папок к справочнику структур справочников»** (spectree) **- «Список объектов входящих в папку»** (spectree_obj) необходимо установить функцию **«Передавать»** в поле **«Выгрузка данных»**.

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/a0a6dc9dee82a1e5d3cc9bee379fdc3b.png)

4.  В завершении корректировки нажать кнопку **«Записать»**.

    **Наименование —** название шаблона обмена данными.

    **Флаги «Для общего обмена», «Документ», «Справочник» —**

    **Кнопка «С» и «Д»** **—** создание либо Справочника, либо документа.

    **Передавать —** производить передачу данного справочника в филиал (передавать) или нет (не передавать).

    **Условие передачи —** если необходимо предавать справочник не полностью, или не всегда, то в качестве условия передачи можно указывать текст SQL запроса. Указывать условие передачи для справочников не обязательно.

    **Флаг «Передавать целиком» —** доступен только для справочников и указывает системе, что объект всегда передается целиком (все записи, содержащиеся в справочнике), вне зависимости от указанных условий.

    **Выпадающий список «Принимать»** — выбирается условие приема справочника в базе данных филиала. Условие принимать при отсутствии такого же - принимать документ, если его нет в базе-приемнике. Документ в любом случае будет загружен НЕ проведенным. Проведение осуществляется оператором в журнале передаваемого документа. Условие всегда принимать - добавлять, если такого документа нет, а если документ есть, но он не проведен – заменить. Проведенный документ не заменяется.

    **Флаг «Очищать перед загрузкой» —** доступен только для справочников. Установка признака указывает системе на необходимость очищать содержимое справочника в базе приёмнике перед загрузкой данных.

    **Флаг «Может редактироваться во всех филиалах» —** доступен только для справочников, указывает системе, что необходимо определить условие синхронизации в карточке справочников при вводе одинаковой информации в разных филиалах. Если признак не установлен, то предполагается что ввод информации в справочник осуществляется в одном филиале, а синхронизация осуществляется по полям maindb и mainic в таблице sprmain.

    **Выпадающий список «Синхронизировать по полю» —** Позволяет выбрать поле справочника для синхронизации и добавить его в выражение синхронизации без написания кода нажатием кнопки «Добавить поле в выражение синхронизации».

    **Выпадающий список «Выражение синхронизации» —** значение заполняется автоматически при выборе поля для синхронизации и добавления его в выражение. При ручном вводе выражения, необходимо учитывать специфику синтаксиса выражения. Дело в том, что данное выражение не вычисляется самостоятельно, а используется как часть общего выражения. Поэтому, например, если необходимо синхронизировать справочники по наименованию (поле name), то в этом выражении необходимо указать следующее: name = '" + name + "'.

    **Флаг «Использовать единый код во всех филиалах» —** установка признака указывает системе, что синхронизация производится по внутреннему коду справочника в системе. При этом нет необходимости перекодировать значения полей ссылающихся на элементы этого справочника.

### Настройка правил обмена для документов

В дереве каталога необходимо выбрать папку **«Документы»** и указать необходимый документ. В правой части окна настроить правила обмена.

> Важно! Для документов настройка условий передачи данных обязательна.
{.is-warning}


![2013-04-09_123302.png](/images/admin-guide/modules/357501916a2d47a700a223734dbe9ec9.png)

> В программных продуктах серии Айтида сам по себе прием документов из центра, или из любого другого филиала не может автоматически произвести ни какие изменения в базе данных (тем более – задним числом). Вся поступившие документы попадают в журнал документов и нуждаются в дополнительной обработке сотрудником филиала (Проведению).
{.is-warning}

> Сводную таблицу по настроенным правилам для обмена документами можно посмотреть, нажав на папку «Документы», справа отобразится таблица.
{.is-warning}


### Настройка правил обмена для справочников

В дереве каталога необходимо выбрать папку **«Справочники»** и указать необходимый документ. В правой части окна настроить правила обмена.

![2013-04-09_125005.png](/images/admin-guide/modules/b964fb4355424e74063b2d6b6f169eb9.png)

> **Внимание!** Для синхронизации товаров по коду необходимо установить флаг **«Может редактироваться во всех филиалах»**, и в поле ввести выражение.
{.is-warning}

> Сводную таблицу по настроенным правилам для обмена справочниками можно посмотреть, нажав на папку **«Справочники»**, справа отобразится таблица.
{.is-info}


![2013-04-09_125742.png](/images/admin-guide/modules/c4521d4cd13fbc61ecc03fef29e1d63a.png)

### Группы Филиалов

По умолчанию в справочнике содержится пред настроенная карточка «Основная группа.

**Меню Модуль консолидации - Группы Филиалов**

Нажать кнопку «Добавить пользователя» и выбрать в Справочнике филиалов «Филиал». Нажать кнопку «Записать».

![Изображение выглядит как текст, стол Автоматически созданное описание](/images/admin-guide/modules/edc7670a093b24da6808476b2ab72ccc.png)

## Настройка филиалов - Вспомогательный Филиал

Настройка **«Вспомогательного филиала»** производится аналогичным образом, однако настройку **«Шаблонов правил обмена»** производить не требуется, в случае использования обмена только между центральным офисом и филиалами. Если обмен предполагается между центральным офисом и филиалами, и филиалами между собой, то настройка **«Шаблонов правил обмена»** необходима.

### Справочник Филиалов

Справочник филиалов служит для загрузки информации о филиалах, подключенных к главному офису.

**Меню Модуль консолидации – Настройка филиалов**

![Справочник филиалов.PNG](/images/admin-guide/modules/081cab9cf5d76ef55070939b0646572e.png)

По умолчанию в справочнике содержится карточка пред настроенного филиала **«Магазин»** с кодом **«001»**. Необходимо откорректировать и создать карточки Вспомогательных Филиалов. При создании новой карточки Филиалу автоматически присваивается **«Код филиала»**.

> **Внимание!** Необходимо, чтобы в БД Центрального филиала и других филиалах эти коды были одинаковыми!
{.is-warning}


### Вкладка «Серверы и базы данных»

В БД **«Вспомогательный филиал»** создается карточки филиала **«Центр»** и филиала **«Филиал»**.

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/6eb403bc665d2c2d903f0bd0a787255c.png)

**Дополнительный код —** используется для связи с другими системами, не обязателен для заполнения.

**Наименование —** официальное наименование филиала. Используется во всех окнах «Выбор филиала», вызываемых по нажатию одноименной кнопки, расположенной в других окнах («Журнал всех документов», «Переоценка ТМЦ» и др.)

**Имя базы данных** — для локальной базы и сервера, предназначено для указания наименования рабочей базы данных.

**Флаг «Использовать прямой доступ к удаленному серверу»** — установить, если возможен прямой доступ к удаленному серверу (например, сервер находится в сети).

### Вкладка «Способы доставки»

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/e5d326a0c3015ea37eed1863ee8221eb.png)

> **Внимание!** *Необходимо, чтобы путь к каталогу загрузки данных различался для* **«Центрального филиала»** *и* **«Вспомогательного филиала»***.***.**
{.is-info}


**Поля «Выберите способ доставки исходящих сообщений» и «Выберите способ доставки входящих сообщений»** — позволяет выбрать способ доставки исходящих/входящих сообщений (по электронной почте, FTP-серверу и т.п.). Способы доставки можно создать и настроить в «Справочнике способов доставки».

> **Внимание!** *При обмене по электронной почте в Карточке филиала* **«Центр»** *карточки способа доставки данных направление* **«Отправка данных»** *настраивается, как правило, с адресом имени сервера SMTP. Для направления* **«Получение данных»** *настраивается с адресом имени сервера POP.* 
{.is-info}

> **Внимание!** *При обмене через FTP-сервер в Карточке филиала* **«Центр»** *карточки способа доставки данных направление* **«Отправка данных»** *содержит данные для входа на FTP-сервер.*
{.is-info}

> **Внимание!** *В Карточке филиала* **«Филиал»** *карточки способа доставки данных направление* **«Отправка данных»** *и* **«Получение данных»** *указывается тот же способ доставки, что и в карточке* **«Центрального филиала»***.*
{.is-info}


### Вкладка «Файлы и каталоги»

![](/images/admin-guide/modules/5a4cfc0fc7ccd9275ea976e155f66d34.png)

Обмен через «Файлы и каталоги»- основной метод обмена между филиалами.

**Каталог для выгрузки данных** — необходимо заполнить именем каталога, который будет предназначаться для создания файлов выгрузки.

**Каталог для загрузки данных** — необходимо заполнить именем каталога, в который будет скопирован файл с данными перед загрузкой.

**Поля «Шаблон файла для загрузки данных» и «Шаблон файла для выгрузки данных»** — необходимо заполнить шаблоном имени файла. Создать свой уникальный шаблон, а так же скопировать примеры шаблонной имен файлов, нажав на кнопку «Справка по формату шаблонов имен файлов».

> На вкладке «Файлы и каталоги» обязательно заполнение Полей **«Шаблон файла для загрузки данных»** и **«Шаблон файла для выгрузки данных»**.  Создать свой уникальный шаблон или заполнить поля примерами шаблонных имен файлов, скопировав их из диалогового окна, нажав на кнопку **«Справка по формату шаблонов имен файлов»** на этой же вкладке.
{.is-warning}

> **Внимание!** *В Карточке филиала «Филиал» карточки способа доставки данных направление «Отправка данных» и «Получение данных» указывается тот же способ доставки, что и в Карточке филиала Центр.*
{.is-warning}

> В автоматическом режиме обмен данными через e-mail и FTP в текущей версии не используется.
{.is-warning}


### Вкладка «Прочее»

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/e57f0013ddef6cf677e64b474c611bd7.png)

**Флаг «База является самостоятельным филиалом»** — должен быть установлен во всех карточках филиалов на всех объектах распределенной сети.

> **Внимание!** *В БД* **«Вспомогательный филиал»** *для карточки филиала* **«Центр»** *установить флаг* **«Филиал является главным офисом»** *и* **«База является самостоятельным филиалом»***. В БД* **«Вспомогательный филиал»** *для карточки филиала* **«Филиал»** *установить ТОЛЬКО флаг* **«База является самостоятельным филиалом»***.*
{.is-warning}


### Параметры системы

Основную настройку необходимо провести на вкладке «Настройки».

**Меню Параметры - Параметры системы**

### Вкладка «Настройки»

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/180bf08e0af90753a3627b52f9201002.png)

**Код филиала** — изменить на «Филиал», посредством выбора пункта из выпадающего списка.

**Префикс документов** — дает возможность указать комбинацию символов, которая будет автоматически добавляться в номера всех документов, созданных в данном филиале.

**Коды филиалов входящих в рабочую базу** — должны совпадать с именем «Код филиала».

**Флаг «Использовать структуры папок из точки зрения»** — устанавливается по умолчанию. Остальные поля заполняются на усмотрение пользователя.

## Выбор филиалов для работы

Окно **«Выбор филиала для работы»** вызывается как из соответствующего пункта меню **«Модуль консолидации»**, так и кнопкой **«Выбор филиалов для работы»** на панели инструментов главного окна программы.

![Окно выбора филиала для работы.PNG](/images/admin-guide/modules/219dc61c6df94810eb8b977b983094d2.png)

1.  Кнопка **«Выбор филиалов для работы»** станет доступна на главной панели инструментов, нажав ее, появится диалоговое окно **«Выбор филиала/группы филиалов»**.
2.  Установить флаг **«Выбор филиалов»**, из списка необходимо удалить филиал **«Центр»** и добавить филиал **«Филиал»**.
3.  Нажать кнопку **«Выбрать»**.

![Изображение выглядит как стол Автоматически созданное описание](/images/admin-guide/modules/8c3c3e7265b2e22eedbb78103c15381b.png)

### Группы Филиалов

По умолчанию в справочнике содержится одна настроенная карточка **«Основная группа»**.

**Меню Модуль консолидации - Группы Филиалов**

1.  Нажать кнопку **«Добавить пользователя»**
2.  В **«Справочнике филиалов»** выбрать **«Центр»**.
3.  Нажать кнопку **«Записать»**.

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/a423e17644138834a4fa4a99a75b0091.png)

## Окно «Модуль обмена данными»

Использование **«Модуля обмена данными»** осуществляется для передачи данных из **«Центрального филиала»** в вспомогательные. Перед началом обмена необходима некоторая настройка **«Загрузки/Выгрузки данных»**.

**Меню Модуль консолидации - Обмен данными**

### Вкладка «Загрузка данных»

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/7c9049cd84d7b9255bc42f0f9debbbaa.png)

**Выпадающие списки «Из филиала» или «Из группы»** — необходимо выбрать, откуда будет осуществляться передача, в дальнейшем, выбрать из выпадающего списка подходящий пункт из какой БД филиала будет производиться загрузка.

**Поле «Файл для загрузки»** — при способе доставки по электронной почте или FTP, необходимо сначала указать путь в (путь к каталогу для распаковки файлов).Для загрузки данных при обмене через Папки и файлы убедиться в правильности указанного пути к каталогу выгрузки файлов в поле «Файл для загрузки» и нажать кнопку «Загрузить».

**Кнопка «Доставить»** — при способе доставки через FTP-сервер и по электронной почте необходимо сначала указать путь к распаковке файлов загрузки,

> **Внимание!** Нажатие кнопки **«Доставить»** обязательно! В противном случае, данные загрузить будет нельзя.
{.is-warning}


**Кнопка «Загрузить»** — загрузку необходимо осуществляется, когда проведена выгрузка данных из «Филиал»/«Группы».

### Вкладка «Выгрузка данных»

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/56c658b9357d7e844a8ed72441a2696f.png)

**Опцию «Все данные»** — необходимо выбрать при первой выгрузке данных.

**Флаг «Удалять данные перед загрузкой»** доступен только при выборе «Все данные».

> **Внимание!** Флаг **«Удалять данные перед загрузкой»** следует использовать с осторожностью, так как его установка приведет к удалению всех справочником и документов перед загрузкой. **Этот флаг необходимо установить при первой синхронизирующей выгрузке данных в филиал**.
{.is-warning}


**Опция «Измененные данные» или «За период»** — необходимо установить в секторе «Период выгрузки» при последующих выгрузках.

**Кнопка «Выгрузить»** — нажать для отправки данных.

В завершении рекомендуется проверить наличие заполненных Справочников ТМЦ, документов Приходная накладная, Внутреннее перемещение и провести документы, относящиеся к Вспомогательному Филиалу.

### Настройка сервера удаленных подключений

При использовании сервера удаленных подключений у пользователя в филиале появляется возможность создать карточку ТМЦ в базе центра или выбрать уже существующую карточку.

Необходимо зайти в папку с установленной программой Айтида (по умолчанию, **С:\\Program Files\\Itida**) и запустить приложение **ISConfig.exe.**

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/ea43ed4445a13a07f47cfdf8cd0f5f33.png)

#### Порядок действий «Настройка параметров Айтида СУД»

1.  Выбрать службу **IDMService.exe** в поле **«Имя исполняемого файла службы»**.
2.  Определить log-файл, выбрав его в поле **«Имя файла журнала сообщений и ошибок»** или введя название и формат файла. По умолчанию порт для АСУП и АМЛ — **95** и **98**
3.  Далее необходимо нажать кнопку **«Установить службу»**, после чего необходимо подтвердить установку службы нажатием кнопки **«ОК»**.
4.  Перейти в область **«Параметры подключения к серверу»**. Выбрать имя SQL-сервера, нажав соответствующую кнопку. После этого необходимо указать имя и пароль пользователя для доступа к серверу. Нажать кнопку **«Подключиться к серверу»**, чтобы определить БД, с которой служба будет работать.
5.  Для выбора базы данных следует выбрать из выпадающего списка необходимую базу и для завершения настройки и запуска службы необходимо нажать на кнопку **«Запустить службу»** и **«Сохранить»** введенные настройки.

#### Загрузка карточек ТМЦ при подключении между Главным офисом и Филиалом

1.  Открыть карточку филиала, из которого требуется установить подключение к центральной базе

**Меню Модуль консолидации - Настройка филиалов**

2.  В нижней части окна карточки в поле **«Имя/адрес сервера»** требуется указать IP-адрес компьютера, с которого будет осуществляться подключение, а так же следует задать порт. Необходимо указать имя сервера и базы, как локального так и удаленного. Поставить флаг, **«Использовать прямой доступ к удаленному серверу»**.

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/9f07e7d97ff03c2a11b20cdc414fa138.png)

> В базе филиала в параметрах системы должен быть **отключен** флаг **«Главный офис»**.
{.is-warning}


3.  При создании новой карточки товара на объекте **«Филиал»**, следует ввести наименование товара и нажать на кнопку **«Найти карточку в базе другого филиала**». Система подключится к базе удаленного объекта и выведет список карточек удаленной базы, в наименовании которых присутствует то наименование, которое было задано в карточке товара.

![2013-04-09_162602.png](/images/admin-guide/modules/42b72b29adeab2ec744a563029f02468.png)

4.  Если нужный товар есть в списке, тогда его следует отметить флагом и нажать на кнопку **«Загрузить»** - в результате, система загрузит все реквизиты из удаленной карточки.

![Изображение выглядит как стол Автоматически созданное описание](/images/admin-guide/modules/ce2cec01e59a35fbcfc0fe8f49182ad3.png)

Можно воспользоваться поиском по папкам или установить фильтр. Если необходимая карточка отсутствует в списке, тогда требуется нажать на кнопку **«Добавить»**, после чего система передаст карточку, созданную в филиале, в удаленную базу и запишет там, после чего созданная карточка отобразится в окне **«Подбор товаров»**, где ее так же необходимо будет отметить флагом. Для создания папки в удаленном филиале необходимо нажать кнопку **«Создать папку»**.

> **Внимание!** Для подключения к удаленной базе необходимо, чтобы код филиала в карточке филиала и код филиала в параметрах удаленной базы данных совпадал..
{.is-warning}

> **Внимание!** Для добавления папок в удаленный филиал, необходимо, чтобы структуры справочников были синхронизированы.
{.is-warning}


# Модуль регистрации продаж

## Настройка перед работой

В системе «Айтида Retail» доступна возможность использовать форму регистрации продаж с подключением фискального регистратора, весов с ПЭ, дисплея покупателя и т.п. для оформления продаж.

1.  В **«Справочнике пользователей»** необходимо создать карточку пользователя и определить в поле **«Сотрудник»** карточку сотрудника или создать новую.

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/0a54ac6f07d4a51626ac977fd34d8b59.png)

2.  В **«Справочнике сотрудников»** создать карточку сотрудника. Обязательно, чтобы у каждого сотрудника **«Табельный номер»** и **«Код авторизации»** был уникальным. Указать **«Пароль»**, и **«Профиль»**, значение которого можно узнать из выпадающей подсказки.

![](/images/admin-guide/modules/d193ed02b9c7a13548b5883ca5091929.png)

3.  В справочнике **«Торговое оборудование»** необходимо создать и настроить карточку ФР или ПД. Подробнее об этом можно узнать в разделе [Подключение оборудования](#_Торговое_оборудование).
4.  В настройках **«Локального оборудования»** в поле **«Оборудование»** выбрать ранее настроенную карточку оборудования.
5.  Запустить **«Форму регистрации продаж».** В форме **«Сервис ФР»** необходимо выбрать оборудование и авторизоваться, выбрав из выпадающего списка **«Оператор/Кассир»** сотрудника.

**Меню Сервис – Модуль Регистрации Продаж**

![](/images/admin-guide/modules/cd83cd0e3797536219e41421b77bbf4f.png)

6.  Ввести пароль, указанный в карточке сотрудника и нажать кнопку **«Подсоединиться к ККМ». П**осле этого система выведет на экран окно об успешном подключении.

![](/images/admin-guide/modules/a08cefe95fe0fd083db6d4141cc95fad.png)

В форме регистрации продаж имеется панель инструментов для подбора товара, снятия значения с весов, применения скидок, обработки дисконтных и клиентских карт.

**Заполнение списка товаров может быть произведено несколькими способами:**

**Сканером штрих-кода** — для регистрации товара по ШК необходимо отсканировать штриховой код в окно регистрации, либо ввести его числовое представление в поле ввода с клавиатуры и нажать кнопку ШК, либо клавишу <kbd>F8</kbd>.

**По коду товара, введенному с клавиатуры** — для этого необходимо ввести код товара в поле ввода с клавиатуры, и нажать кнопку КОД, либо клавишу <kbd>F4</kbd>.

**По артикулу товара, введенному с клавиатуры** — для этого необходимо ввести артикул товара в поле ввода с клавиатуры, и нажать кнопку АРТИКУЛ, либо клавишу <kbd>F3</kbd>.

**По наименованию товара, введенному с клавиатуры** — для этого необходимо ввести наименование товара в поле ввода с клавиатуры, и нажать кнопку НАИМЕНОВАНИЕ, либо клавишу <kbd>F7</kbd>.

**Подбором из справочника товаров** — для этого необходимо ввести один из реквизитов товара (код, наименование, артикул)в поле ввода с клавиатуры, и нажать клавишу <kbd>ENTER</kbd>, либо кнопку, либо клавишу <kbd>F2</kbd>.

> **Внимание!** Более тонкая и сложная настройка **«Формы регистрации продаж»** производится из выпадающего списка кнопки **«Настройка»**.
{.is-warning}

> **Внимание!** Работа с модулем регистрации продаж для торговли алкоголем описана в [Айтида модуль ЕГАИС](/egais).
{.is-warning}


![Изображение выглядит как стол Автоматически созданное описание](/images/admin-guide/modules/900da44f7b4980cd0602feb5fb247a1e.png)

## Работа с формой «Регистрация»

Процесс регистрации товара может включать в себя не только ввод количества регистрируемого товара, но и выбор его дополнительных характеристик. В форме регистрации есть возможность редактировать количество зарегистрированного товара, для этого необходимо ввести с клавиатуры необходимое значение со знаком плюс или минус соответственно (например 5+) и нажать клавишу <kbd>ENTER</kbd>. Для оформления возвратов покупателя необходимо выбрать операцию **«Возврат»**.

1.  Кнопка **«Новая Регистрация»** может отменять текущую регистрацию, загружать предыдущую и ранее оформленную регистрацию, для оформления возврата или печати документа, например, товарного чека.

![Изображение выглядит как стол Автоматически созданное описание](/images/admin-guide/modules/a10f1b1b184a59b5138835fb75c3a106.png)

2.  Информацию о введенной дисконтной карте можно посмотреть, выбрав соответствующий пункт в выпадающем меню:

![Изображение выглядит как стол Автоматически созданное описание](/images/admin-guide/modules/166950e4f8d18d781b08b83abd105301.png)

3.  Поле **«Склад»** заполнено по умолчанию значением из карточки фискального регистратора.

> **Внимание!** При выборе расходной накладной/возврата от покупателя, параметр **«Сформировать отдельный документ»** ставится автоматически. При выборе **ДКС** он снимается автоматически
{.is-warning}


4.  Поле **«Операция»** позволяет оформлять не только продажи, но и оформлять возвраты от покупателей и расход ТМЦ с последующим автоматическим созданием документов **«Расходная накладная»** и **«Возврат от покупателя»**. В форме **«Подитог»** переключатель **«Сформировать отдельный документ»** ставится автоматически, если тип операции установлен в положение **«Возврат»** и **«Прочее»**. При выборе **«Продажа»** флаг снимается.

![](/images/admin-guide/modules/8834ebaba710827f56b2a2d804fdae16.png)

> **Внимание!** Для начисления произвольной скидки необходимо ввести ее значение с клавиатуры в поле ввода и нажать кнопку скидка, где <kbd>Ctrl</kbd>+<kbd>D</kbd> – скидка на сумму, <kbd>Ctrl</kbd>+<kbd>P</kbd> – процентная скидка. Произвольные скидки работают, если отключены все флаги, относящиеся к скидкам в карточке ККМ.
{.is-warning}

> **Внимание!** Продажи по свободной цене доступны только при установленном флаге в поле **«Разрешить скидки на позицию»** в карточке ККМ в справочнике **«Торговое оборудование»**.
{.is-warning}

> **Внимание!** Есть возможность объединения строк с одинаковыми товарами/услугами. Для активизации этой возможности необходимо в форме Сервис ФР установить соответствующий флаг.
{.is-warning}


5.  После заполнения окна регистрации необходимыми позициями, для осуществления расчета с клиентом необходимо вызвать окно **«Расчет с покупателем»**, нажав кнопку **«Подитог»**, либо нажав клавишу «+» в правой части клавиатуры, либо нажав клавиши <kbd>Ctrl</kbd>+<kbd>Enter</kbd>.

> **Внимание!** Флаг **«Не сохранять значения»** позволяет отключить запоминание параметров, установленных в окне **«Расчет с покупателем»**.
{.is-warning}


6.  В поле **«Принято от покупателя»** можно ввести сумму, полученную от клиента. После того, как значение принятой суммы введено, программа автоматически рассчитает сумму сдачи, и отобразит ее в поле **«Сдача»**
7.  Если поля **«Наличные»** и **«Безналичные»** не заполнены, то считается, что покупатель рассчитался без сдачи.
8.  Для оформления продажи и печати чека необходимо нажать кнопку **«Сформировать чек»**, либо нажать клавишу <kbd>ENTER</kbd> на клавиатуре.

Для снятия отчетов с кассы необходимо вызвать форму **«Сервис ФР»**, нажав кнопку на панели инструментов окна регистрации, выбрать требуемый отчет и нажать кнопку **«Сформировать отчет».**

> **Внимание!** Снимать Z-отчет и X-отчет может только пользователь с правами администратора.
{.is-warning}


**«Сервис ФР»** также поддерживает операции **«Внесение»** и **«Выплата»** денег в кассу. Для формирования документов по произведенным кассовым операциям, необходимо нажать кнопку **«Загрузить документы»**.

![Изображение выглядит как текст Автоматически созданное описание](/images/admin-guide/modules/4a04055a74bd546f7a78f2cdf5b3d051.png)
