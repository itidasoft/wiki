---
title: Изменения в версиях
description: История изменений
published: true
date: 2022-09-07T13:27:13.391Z
tags: новый релиз, версия, исправление, новый функционал
editor: markdown
dateCreated: 2022-08-18T20:00:53.342Z
---

# Изменения функционала

## Версия 4.4.7

- **Модуль Маркировка.** Добавлена поддержка объемно-сортового учета при приёмке накладных по ЭДО в модуле маркировки.
- **Модуль Маркировка.** Форма проверки поставки КМ. При чтении кода маркировки, содержащей количество/вес товара, увеличивается количество в строке с GTIN, совпадающим с GTIN из кода маркировки.
- **Модуль Маркировка.** Добавлен документ Выбытие. В модуле Маркировка расположен на закладке Выбытие / списание.
- **Модуль Маркировка.** Добавлена возможность формирования документов выбытия на основании поставки КМ (контекстное меню на закладке Приход модуля Маркировка).
- **Модуль Маркировка.** Добавлена возможность формирования документов выбытия на основании актов списания ТМЦ и документов ВиК в кнопке Оборудование. Для этого, в документах должны быть прочитаны КМ.
- **Модуль Маркировка.** Добавлена возможность загрузки корректирующих УПД.
- **Модуль Маркировка.** Добавлена возможность запроса всех КМ, числящихся на остатке в ЛК ЧЗ. Функционал может быть полезен для проведения инвентаризации КМ имеющихся в наличии.
- **Модуль ЭДО.** Добавлена возможность загрузки корректирующих УПД.
- **МРП1.** Внесено изменение. Теперь вызов функции профиля Проверка КМ производится только при чтении кодов маркировки. Ранее вызов производился и для алкогольных марок.
- **Справочник ТМЦ.** Добавлены группа маркировки Упакованная вода.
- **Справочник ТМЦ.** Добавлены группа маркировки Ювелирные изделия.
- **Обмен с 1С.** Добавлен профиль экспорта версии 3.0.108.
- **Обмен с 1С.** Добавлено удаление символов CR и LF в наименованиях товаров и контрагентов при выгрузке.
- **Обмен с оборудованием.** Добавлена интеграция с Frontol AlcoUnit версии 4 по REST.API
- **Обмен с оборудованием.** Обмен с ТСД на MobileSmarts. Оптимизирована загрузка из ТСД. Исправлена выгрузка и загрузка списания ТМЦ.
- **Обмен с оборудованием.** Профиль для обмена с ЛК Дримкас. Доработана выгрузка весового товара в кассу. Доработана выгрузка цен с привязкой к нескольким кассам в кабинете. Добавлена выгрузка признака молочной продукции.
- **Обмен с оборудованием.** Работа с платежными системами. Исправлена печать слипов и получение номера ссылки при работе с платежной системой Arcus 2 через прямую интеграцию.
- **Обмен с оборудованием.** Работа с ФР. Оптимизирован функционал печати чеков при работе из МРП 1.
- **Документы.** Добавлена команда окну документа `ДОБАВИТЬСТРОКУСТОВАРОМ`.

## Версия 4.4.6

-   **Документ Списание ТМЦ.** Добавлена проверка перед записью документа на соответствие марок / справок товарам в документе.
-   **Документы (все).** Добавлена клавиатурная функция (по умолчанию F7) для перевода документа из **Просмотр** в **Редактирование** (если документ не проведен, а открыт на просмотр и у пользователя есть право на корректировку).
-   **Счетчик бонусных балов**. Добавлен Скрипт расчета, выполняемый в случае, если бонусные балы не должны быть записаны в базу данных ПП Айтида, а должны быть переданы внешней системе лояльности.
-   **Справочник оборудования**. Для оборудования типа ФР добавлен вывод даты последней загрузки данных в ДКС.
-   **Форма Пакетный обработчик**. Исправлена работа параметра **Печатать ценник только** **с измененной ценой** и **Печатать этикетки только с измененной ценой**. Не определялось наличие изменения цены при вызове экранной формы из документа Переоценка ТМЦ.
-   **Модуль Маркировка**. Добавлена возможность убрать доступ к отдельным вкладкам и указать порядок вкладок в окне модуля. Для этого необходимо добавить функции **ДоступностьВкладки** и **ПорядокВкладок** в библиотеку Маркировка.
-   **Модуль Маркировка**. **Параметры модуля**. Добавлены параметры для обмена данными с Фронт системами.
-   **МРП 2**. Добавлено удаление чека из базы данных, в случае, если произошла ошибка печати, но при этом не было подтвержденной оплаты и не были отправлены данные в ЕГАИС.
-   **МРП 2.** Исправлен расчет остатков товара на складе. Расчет приведен в соответствие с выбранным вариантом в параметрах РМК.
-   **МРП 2.** В расчет скидок по схеме скидок добавлена обработка кодов оборудования, для того, чтобы можно было в схеме указать только необходимые ФР, для применения скидки. Для применения данного изменения необходимо перезагрузить схемы скидок в РМК.
-   **МРП 2 и 1.** **Профили ФР.** **Работа с ФР.** Доработан вывод информации о начислении, списании и остатке бонусов в чеке. Теперь эти значения выводятся для каждой бонусной карты в чеке. Значение начисления и списания выводятся только в случаях наличия начисления или списания в текущем чеке.
-   **МРП 2 и 1.** **Профили ФР.** **Работа с ФР.** Для ККТ Штрих доработана функция передачи маркированных позиций в чек. Теперь, если включено объединение позиций в схеме РМК, то при пробитии чека такие позиции автоматически разбиваются на отдельные строки чека.
-   Добавлена интеграция с системой карт лояльности **LoCards**. Описание подключения см. в [документации](https://old.itida.ru/download/docs/itida_locards.pdf).
-   Добавлена интеграция с программным обеспечением для **АТОЛ Mark.Scan** для терминалов сбора данных. Описание подключения см. в [документации](https://old.itida.ru/download/docs/itida_markscan.pdf).
-   Добавлена интеграция с платежной системой Arcus2. Это дает возможность интеграции с терминалами АТОЛ Pay без покупки дополнительных драйверов.
-   **Обмен с оборудованием.** Доработана интеграция с Бифит.Касса. При обмене в формате CSV есть возможность сопоставлять торговые объекты в личном кабинете со складами в ПП Айтида. Для правильной выгрузки с привязкой товаров к конкретному торговому объекту необходимо выбрать склад в карточке оборудования. При этом склад сопоставляется с торговым объектом по наименованию, либо по КПП, либо по адресу либо по доп. коду. При выборе варианта сопоставления по доп. коду достаточно указать любое из перечисленных выше полей торгового объекта из личного кабинета Бифит в доп. коде карточки склада, выбранного в торговом оборудовании.
-   **Обмен с оборудованием**. Доработана возможность обмена с Бифит.Касса после добавления со стороны Бифит сжатия ответов сервера с 1 июля 2022.

## Версия 4.4.5

-   **Генератор отчетных форм**. Добавлена возможность прямого экспорта отчетов в PDF и XLSX. Наличие сторонних программ теперь не требуется.
-   **Внутренние отчетные формы**. Добавлена возможность экспорта отчетов в PDF и XLSX
-   **Модуль маркировка. Маркировка остатков**. Добавлена загрузка марок из оборудования (ТСД).
-   **Модуль маркировка. Маркировка остатков.** Добавлена возможность создания документа отгрузки КМ.
-   **Модуль маркировка. Маркировка остатков**. Добавлена возможность создания документа отгрузки КМ для списания КМ
-   **Модуль маркировка. Маркировка остатков**. Добавлена возможность создания документа списания КМ
-   **Модуль маркировка. Маркировка остатков**. Добавлена информация об общем количестве КМ в документе и количестве прочитанных КМ.
-   **Модуль маркировка. Маркировка остатков**. Добавлена вариант типа документа Запросить КМ в обороте.
-   **Модуль маркировка. Маркировка остатков**. В список товаров добавлена колонка с прочитанным количеством КМ для строки. Подробнее с новым функционалом можно ознакомиться в документации.
-   **МРП 2**. Добавлена возможность работы с СБП. Для этого реализована возможность вывода QR кода для оплаты чека на экран кассира и дисплей покупателя. Так же возможен вывод QR кода на специализированный дисплей для QR кодов.
-   **МРП 2**. Добавлено понятие **Платежная система**. Это дает возможность автоматического или ручного распределения принимаемой оплаты по разным платежным системам. Например, через терминалы разных банков, либо СБП либо иными способами.
-   **МРП 2**. Добавлена возможность использования нескольких платежных систем для видов оплаты Наличные, Безналичные, Кредит. Предусмотрена возможность настройки алгоритмов автоматического расчета и контроля сумм оплаты, либо их ручного распределения.
-   **МРП 2**. Добавлены типы чеков **Аванс полученный** и **Предоплата от поставщика** выплаченная. Данные типы чеков позволяют реализовать схемы авансирования с последующей отгрузкой товаров и контролем сумм аванса и отгрузки.
-   **МРП 2**. Для реализации пост-отгрузки авансовых платежей, в обработки «Оплата чека со сдачей» и «Закрытие чека без сдачи» добавлены переменные **СУММААВАНСА** и **СУММАПРЕДОПЛАТЫПОСТАВЩИКУ**, содержащие ранее полученные суммы. Итоговая сумма оплаты чека считается с учетом этих сумм.
-   **МРП 2**. Изменён алгоритм работы модуля при печати чека. Перед печатью чек сохраняется в незавершенных чеках. Затем обрабатываются оплаты чека. После оплаты чек(и) выводится на печать. В случае возникновения ошибок и прерываний работы, например, при отключении электропитания, кассиру предлагается продолжить незавершенную печать или отменить ранее успешно произведенные операции.
-   **МРП 2**. В профиле ФР добавлена обработка **Отмена чека.** Обработка вызывается в случае, если чек был выведен на печать, но после возникла какая-либо ошибка, например, при печати второго подчека, и кассир отказался от всей операции.
-   **МРП 2**. Изменена работа с возвратами. Введено понятие связанных чеков. Добавлена возможность формировать чеки, связанные единой логикой, по которым будут суммарно отслеживаться оплаты и отгрузки.
-   **МРП 2**. Кнопка "Возврат по документу" переименована в "Чек на основании". При выборе чека, на основании которого выполняется операция, в верхней части окна модуля выводится вся история по сделке. Вся необходимая информация о чеках может быть распространена по всем кассовым узлам, что дает возможность совершать авансовые и кредитные операции по всей сети кассовых узлов.
-   **МРП 2**. Добавлена возможность частичной отмены объединения товаров в строке чека. Теперь из программы (скрипта) можно отметить строку чека как уникальную (поле f_separate в значении Истина). К такой строке не будет добавляться количество, при подборе аналогичного товара в чек.
-   **МРП 2**. Добавлена возможность включать (добавлять) стоимость выбранных модификаторов в стоимость товара. Для этого из программы (скрипта) можно установить признак в строке чека f_addmdfprice в значении Истина. Тогда, стоимость подобранных в строке модификаторов будет добавлена к учетной цене товара.
-   **МРП 2**. В список документов, которые могут быть созданы из чека при загрузке данных из МРП 2, добавлен документ **Аванс полученный**. Этот документ может быть использован для сопоставления с расходной накладной, из которой был напечатан чек.
-   **МРП 2**. Добавлена возможность выбора операции, которую выполняет чек. Для этого достаточно щелкнуть мышью в подвале главного окна модуля на номере чека или названии операции.
-   **МРП 2**. Операции **Внесение** и **Выплата**. Добавлена возможность ввода комментария для этих операций . Комментарий записывается в таблицу чеков.
-   **МРП 2**. Добавлен вывод подсказки о "горячих" клавишах по F1, в случае, если клавиша F1 не была переопределена.
-   **МРП 2**. Изменены стили органов управления, для того, чтобы было лучше видно активный элемент на экране
-   **МРП 2**. При чтении алкогольной марки добавлена проверка соответствия прочитанной марки товару в строке. Наличие проверки снижает вероятность ошибки при подборе алкогольного товара из справочника или чтением EAN-13 и последующего чтения ФСМ.
-   **МРП 2**. В отложенные чеки добавлена запись всей информация о чеке, в том числе то, как и чем он должен быть оплачен.
-   **МРП 2**. Добавлен параметр командной строки /cu. При наличии этого параметра перед запуском модуля будут удалены все незавершенные чеки.
-   **МРП 2**. Добавлена возможность передачи различных документов из центра в кассовые узлы с возможностью загрузки таких документов в чеки регистрации. Отслеживается история создания чеков на основании таких документов.
-   **МРП 2**.Окно ввода оплаты было оптимизировано для использования клавиатуры.
-   **Платежные поручения**. Подбор расчетного счета контрагента. Добавлена возможность выбирать из двух р/с, которые могут быть заданы в карточке контрагента.
-   **Платежные поручения**. Добавлена возможность изменять размеры окна.
-   **Инвентаризация ЕГАИС**. Чтение алкогольной марки. Если в документе есть несколько строк с одной продукцией, то теперь ищется строка с подходящей справкой.
-   **Переоценка по приходу**. Внесено изменение. Теперь название для товара в строке документа формируется из связанной приходной накладной, а не из справочника товаров.
-   **Печать ценников и этикеток из документов**. Добавлена возможность печати только необходимых ценников и этикеток. Для этого в списке товаров документа необходимо отметить требуемые строки и вызвать функцию для работы с ценниками или этикетками. Если в документе нет отмеченных строк, то печать будет произведена для всех товаров из документа.
-   **Профили оборудования**. Для всех видов профилей добавлено поле **Комментарий**.
-   **Профили оборудования**. Добавлены типы оборудования **Платежная система** и **Прочее оборудование**. Описание новых типов оборудования и принципов работы с ним можно найти в документации на [РМК](/rmk)
-   **Торговое оборудование**. Для оборудования с типом ТСД добавлено поле **Строка соединения.** Наличие этого поля позволяет упростить настройку ТСД, работающих не напрямую с оборудованием, а через серверы базы данных такого оборудования.
-   **Торговое оборудование**. В подсказку поля **Профиль** добавлен вывод комментарий из карточки профиля оборудования.
-   **Торговое оборудование**. Добавлены типы оборудования **Платежная система** и **Прочее оборудование**. Описание в документации на [РМК](/rmk)
-   **Профили оборудования**. Для профиля ФР добавлена обработка **Отмена чека**. Обработка вызывается при отмене незавершенного чека.
-   **Узлы обмена**. Добавлена настройка, позволяющая передавать из центра в филиалы чеки. Это может потребоваться для организации возвратов/оплаты кредитов/отгрузки авансов. По умолчанию, передача этих объектов отключена.
-   **Схемы РМК**. В клавиатурные функции добавлены команды:
-   Вывод QR кода.
-   Информация о скидках на позицию.
-   Информация о скидках на чек.
-   Просмотр итогов за смену.
-   Выбор операции Аванс полученный (документ ДКС).
-   Перейти в дерево родительских чеков.
-   Перейти в список товаров.
-   Переключиться между списком и деревом.

Подробное описание новых функций можно найти в документации на [РМК](/rmk).

-   **Схемы РМК**. В список оборудования РМ добавлена возможность подбирать **Платежные системы** и **Прочее оборудование**.
-   **Схемы РМК**. Добавлены поля:
-   Текст для аванса;
-   текст для оплаты кредита.

    Новые поля используется в МРП 2 при выборе операции **Аванс/Оплата** для ввода строки в чек без подбора товара.

-   **Схемы РМК**. В список доступных операций добавлены операции **Аванс** и **Предоплата**. По умолчанию новые операции для чеков запрещены к использованию. Описание новых видов чеков можно найти в документации на [РМК](/rmk).
-   **Форма обмена данными с оборудованием**. В подборе оборудования для обмена, добавлена возможность выбрать папку с оборудованием. Все содержимое папки будет добавлено в список оборудования для обмена.
-   **Форма обмена данными с оборудованием**. Внесено изменение. Теперь при подборе оборудования из пункта **Выбрать тип оборудования** в справочнике будет установлен постоянный фильтр на тип оборудования. Это упрощает подбор только нужного оборудования
-   **Форма проверки входящего документа модуля ЭДО**. Внесено изменение. Теперь, если документ подтвержден, то в форме проверки недоступно изменение типа подтверждения/отклонения документа. Возможность сопоставлять товары сохраняется.
-   **Группы модификаторов**. Добавлена возможность удаления групп модификаторов.
-   **Загрузка электронных накладных**. Добавлена возможность загрузки многострочных данных. Это означает, что если в загружаемом документе есть поля, содержащие перенос строки, то такие данные будут корректно загружены.
-   **МРП 1**. В чтение алкогольной марки добавлена проверка соответствия марки и товару в строке.
-   **Сверка с поставщиками алкоголя**. Добавлена возможность работы с новыми кодами видов товара.
-   **Загрузка электронных накладных**. Добавлена загрузка документа Маркировка. Поставка.
-   **Обмен с 1С.** Добавлены шаблон экспорта и обработка для загрузки данных в 1С бухгалтерию 108-й версии.
-   **Алгоритмы обработки.** Добавлен алгоритм для загрузки калькуляций из ПО Трактир.
-   **Профили оборудования.** Добавлен профиль оборудования для работы с драйвером весов CAS (3000-5000) как с весами без печати этикеток, для чтения веса в **МРП 1/2** и в документах..
-   Разработана специализированная программа **Айтида Мясной бутик**. Программа работает как дополнительное рабочее место Айтида и предназначена для автоматизации мелкого мясного производства. Описание функционала и назначение данной разработки в ближайшее время будет доступно на сайте в разделе **Продукты**.
-   Обновлены и адаптированы для работы с новым функционалом **МРП 2** профили ФР для драйверов Атол, Меркурий, Дримкас и Штрих.

## Версия 4.4.0

-   **МРП1 и МРП2.** При формировании чека транзакция теперь ограничивает только саму запись чека, а не весь процесс формирования чека. Если после записи возникла проблема печати, или иная проблема формирования чека на ККТ, то чек удаляется из базы.
-   **МРП 2.** Изменена работа с объектами скидок. Таблица объектов разделена на три отдельные таблицы - товары/карты/клиенты. Таблицы могут формироваться в момент записи схемы скидок. При применении в МРП 2 проверяется период действия схемы скидок. В МРП 1 изменения не вносились.
-   **МРП 2.** Добавлена обработка правил объединения скидок. Правило объединения задается в папке ставок скидок. В ситуации, когда указано, что нужно применять максимальную или минимальную скидку, а при этом есть две скидки с одинаковой (до двух знаков после запятой) ставкой, будет применена одна из двух скидок. При этом порядок применения не определен.
-   **МРП2.** Добавлена возможность использовать ODBC драйвер 17-й версии (ключ /nc17).
-   **МРП2.** Добавлена возможность указать альтернативную цветовую схему (ключ /cs1).
-   **МРП2.** Добавлена возможность настройки шрифтов и состава выводимых колонок в окнах визуального подбора. Подробнее см. в документации по модулю МРП 2.
-   **МРП2.** В окна визуального подбора добавлена возможность вывода дерева справочника.
-   **МРП2.** Добавлена возможность использовать модификаторы. Если в схеме РМК разрешены модификаторы (в операциях), то кассир сможет подобрать модификаторы к продаваемому товару. Модификаторы включены в схему обмена распределенной базы.
-   **МРП2.** Расширены возможности команды ДОБАВИТЬТОВАРПО… Теперь, если у добавляемого товара есть характеристики, то программа попросит кассира выбрать конкретную характеристику из списка. Данная возможность позволяет программе организовать различные алгоритмы формирования чека, когда к одному товару, необходимо автоматически подобрать другой, а у него есть свои характеристики.
-   **МРП 2. Узлы обмена распределенной базы.** Добавлена возможность настройки передаваемых объектов данных. Может быть полезно, в случае, если на кассе не требуется вся предусмотренная к передаче информация. Например, не требуются остатки товаров. В таком случае, их передачу можно отключить. Это уменьшит объем данных и ускорит обмен.
-   **МРП 1.** В печать чеков из документов добавлена передача КМ для маркированных товаров. Для каждого КМ формируется отдельная строка чека с товаром (аналогично формированию чека из документа с алкогольными марками).
-   **Схемы РМК. Закладка Клавиатура.** Добавлена возможность указать параметр для клавиатурной функции. Параметром можно конкретизировать выполнение функции. Например, подбор товара - указание кода товара позволит сразу добавить товар в чек. Подробнее назначение параметров описано в документации.
-   **Схемы РМК. Закладка Клавиатура.** Добавлена возможность указать штриховой код для функции. Указание ШК позволяет сформировать список служебных штриховых кодов, чтение которых приведет к выполнению необходимой функции. Например, при отсутствии клавиатуры. Так же есть кнопка печати таких ШК.
-   **Схемы РМК.** На закладке **Операции** добавлена возможность выбрать операции, о которых будет записываться история их применения кассиром. Подробнее процесс описан в документации.
-   **Схемы РМК.** Добавлена закладка Доп. свойства. На закладке можно добавить доп. свойства для чека и для строки чека. Значения для дополнительных свойств могут быть заданы в интерактивном режиме, т.е. кассиром, либо программой (скриптом), на основе ответов кассира на задаваемые программой вопросы, либо при анализе других параметров/состава чека. Подробнее работа с дополнительными свойствами описана в документации.
-   **Схемы РМК.** На закладке Интерфейс добавлен признак Не закрывать визуальный поиск. Установка признака укажет программе, что при подборе товаров через визуальный поиск не нужно закрывать окно подбора после того, как товар был выбран. А только кнопкой Закрыть.
-   **Схемы РМК.** На закладке Интерфейс добавлен скрипт Инициализация интерфейса. На текущий момент позволяет задать цветовую схему. Описание цветов и способы установки описаны в документации.
-   **Схема РМК.** Закладка Прочие настройки. Добавлен параметр Выводить поверх всех окон. Указание параметра приводит к тому, что окно МРП2 будет развернуто на весь экран и не позволит переключиться на другое приложение.
-   **Схема РМК.** На первой закладке РМК/Кассиры добавлено время работы предприятия. Это позволяет анализировать, например, в скидках, сколько времени осталось до закрытия / прошло после открытия и применять различные алгоритмы расчетов. Подробнее параметры описаны в документации.
-   **Схема РМК.** На первой закладке РМК/Кассиры добавлено поле со списком доступных складов для отображения остатков. Если поле не заполнено, то будут выводиться остатки для всех складов.
-   **Схема РМК.** На первой закладке РМК/Кассиры добавлено поле для выбора папки, с которой нужно начинать визуальный поиск товаров.
-   **Схема РМК.** В скрипты добавлен скрипт пост обработки чека. Скрипт вызывается для каждого формируемого под-чека, как в случае его успешного закрытия, так при аннулировании.
-   **Схема РМК.** В параметры формирования ДКС добавлена возможность исключить не закрытые смены из обработки.
-   **Справочник схем скидок.** Добавлено поле **Автоматически формировать объекты скидок при записи карточки**. Установка признака скажет системе, что при наличии изменений в схеме (в списках объектов, скидке или периоде действия) в момент записи карточки будут сформированы объекты скидок для МРП2.
-   **Загрузка ДКС из РМК.** Добавлено заполнение поля Денежный карман в ДКС.
-   **Загрузка ДКС из РМК.** В формируемые документы добавлены модификаторы из чеков.
-   **Группы модификаторов.** Добавлен признак автоматического добавления модификаторов в чек РМК. Это означает, что при подборе товара с такой группой модификаторов в чек будут добавлены модификаторы из группы автоматически без доп. действий кассира. При необходимости и наличии прав, кассир сможет изменить выбор.
-   **Модуль Маркировка.** Параметры модуля. Добавлен признак, позволяющий загрузить уже подтвержденные входящие документы. Подтверждённые документы загружаются из периода, выбранного на закладке Поставки модуля Маркировка.
-   **Модуль Маркировка.** В отправку документов добавлена проверка на статус документа IN_PROGRESS. В случае получения такого статуса модуль в течение 10-ти секунд будет повторно запрашивать документ. Если статус так и не изменится, то пользователю будет сообщено, что система не успела обработать документ.
-   **Модуль Маркировка.** Добавлена обработка ситуации, когда ГИС МТ возвращает ошибку 404 в ответ на отправку документа. В этом случае производится 10 попыток запроса документа с интервалом 1 сек. Если ГИС МТ так и не вернет ничего кроме ошибки 404 будет сообщено, что документ находится в процессе обработки и необходимо обновить его статус позже.
-   **Справочник контрагентов.** Добавлено поле второго банка, который будет автоматически выбираться в документе Платежное поручение, при использовании второго расчетного счета контрагента.
-   **Справочник клиентов владельцев карт.** Добавлены поля **Есть согласие на рассылку СМС** и **Есть согласие на получение рекламы**.
-   **Заказ от покупателей.** В расчет скидки по заказу добавлен учет значений полей Максимальная скидка и минимальная цена из карточки товара.
-   **Расходные накладные.** Для разливной продукции изменен расчет количества справок. Теперь учитывается единица измерения в строке документа. Справки распределяются всегда для дал. А количество для справки вычисляется через коэффициент единицы измерения в строке. Так же, с учетом единицы измерения, производится проверка справок перед записью документа.
-   **Расходная накладная/Информация для ЕГАИС.** Добавлен номер автомобиля. В отправку ТТН в ЕГАИС добавлены тэги с номером и маркой автомобиля.
-   **Инвентаризация ЕГАИС.** Добавлена колонка Количество марок.
-   **Документы ЕГАИС со справками и марками.** Добавлен поиск строк по номерам справок/марок аналогично поиску по другим колонкам - нажатие правой кнопки мыши на заголовке колонки.
-   **Документы с маркированным товаром.** Добавлена загрузка КМ из ТСД с автоматическим подбором товара, соответствующего КМ. Товар сначала ищется по EAN13 из КМ, если не найден, то по полю GTIN из карточки товара.
-   **Справочник единиц измерения.** Добавлено поле Код в ОФД. В МРП2 Значение поля передается с чеком в ОФД. При работе с фронт системами значение поля передается во фронт-систему.
-   **Сервис/Параметры пользователя.** В список периодов добавлен вариант Текущий и предыдущий месяцы.
-   **Модуль ЭДО.** В отправку Счета фактуры / УПД добавлен тэг ДокПодтвОтгр. В этом тэге передается номер документа и его дата.
-   **Модуль ЭДО.** При формировании приходной накладной из входящего счета фактуры добавлено заполнение полей Номер и Дата счета фактуры поставщика.
-   **Параметры пользователя.** Убрана признак **Использовать форму обмена с оборудованием 2.1**.

## Версия 4.3.8

-   **Инвентаризация ЕГАИС.** Добавлена колонка **Количество марок**. Содержит количество прочитанных марок для каждой строки документа.
-   **Инвентаризация ЕГАИС.** При проведении инвентаризации розничного регистра и чтении марки, числящейся в штучном учете, добавлен выбор: пропустить ли такую марку, или использовать в документе. Ранее, в описанной ситуации такие марки всегда пропускались.
-   **Инвентаризация ЕГАИС.** При выполнении **Действия / Установить реальное количество** **равным расчетному**, у марок указывается количество равным 1.
-   **Профили ФР**. Добавлена обработка Проверка КМ. Данная обработка вызывается из МРП 1 / МРП 2 при необходимости проверить код маркировки, перед передачей его в ОФД. Передача КМ в ОФД и предварительная проверка необходимы для работы согласно правилам ФФД 1.2.
-   **Справочник оборудования**. Карточка оборудования ФР. Добавлен признак, указывающий системе на необходимость проверять коды маркировки для ФФД 1.2. При использовании двух и более ФР, проверку достаточно производить только на одном из них. В противном случае, время проверки будет в два и более раз больше.
-   **Справочник заданий планировщика**. Добавлена кнопка **Обмен**.
-   **Модуль ЕГАИС. Форма Марки в документах**. Теперь, при вводе серии и номера марки код марки автоматически подставляется в поле кода марки целиком (если, конечно, марка с указанной серией и номером найдена в системе и она одна такая).
-   **Модуль ЕГАИС. Форма Очередь запросов в ЕГАИС**. Добавлен фильтр на запросы, завершившиеся с ошибкой.
-   **Модуль Маркировка. Документ поставки**. Добавлена возможность сопоставления нескольких строк документа с одним товаров. Для этого нужные строки отмечаются в документе. Курсор переводится на строку с выбранным товаром. На заголовке колонки Код нажимается левая кнопка мыши, удерживая клавишу **CTRL**.
-   **Группа ресурсов**. Расширен список предметов расчета и значения предметов расчета приведены в полное соответствие ФФД. **ВНИМАНИЕ!!!** Если ранее пользовались таким вариантом предмета расчета как 7-"Аванс/Предоплата", то после обновления его необходимо будет изменить на новое значение 10-"Платеж".

## Версия 4.3.5

-   **Дисконтные карты.** Добавлен вид карт Подарочные карты и платежные карты.
-   **Дисконтные карты.** Добавлен справочник групп карт для описания общих свойств дисконтных карт.
-   **Дисконтные карты.** В генерацию дисконтных карт добавлен выбор группы карт, для переноса в новые карты общих параметров.
-   **Дисконтные карты.** В установку общих реквизитов добавлен выбор группы карт.
-   **Загрузка электронных накладных.** Поле доп. код товара увеличено до 50-ти символов (было 30).
-   **Загрузка электронных накладных.** При формировании приходной накладной, если в ней есть колонка розничная цена, то она будет заполняться данными из файла.
-   **Модуль Меркурий.** Добавлена возможность выгружать в Меркурий документы внутреннего перемещения.
-   **Добавлен модуль ЭДО.** Подробности см. документацию на модуль ЭДО.
-   **Справочник контрагентов.** В карточку контрагента добавлено второе поле ЭДО ИД. Скрипт модуля ЭДО может выбирать между разными ЭДО ИД
-   **Документы.** В расходные накладные, счета исходящие, акты услуг исходящие, заказы поставщику добавлена выгрузка в модуль ЭДО.
-   **Документы с контрагентами.** В подсказку поля Контрагент добавлен вывод ЭДО ИД контрагента из справочника.
-   **Приходные накладные.** Изменено поведение при вводе значений в поле Сумма. Теперь, если не задана розничная цена, но задан процент наценки, то будет рассчитана розничная цена. Иначе, будет просто пересчитан процент наценки исходя из ранее заданной розничной цены.
-   **Приходные накладные.** Изменена работа при замене товара в строке. Теперь заново заполняются все поля, связанные с товаром. Ранее только заменялся сам товар, а все поля оставались от старого.
-   **Расходные накладные.** В расчет скидки добавлен вариант расчета цены без правил округления. Ранее, при расчете скидки всегда применялись правила округления из категории цены.
-   **Коммерческие предложения.** В экранную форму документа добавлен номер строки по порядку.
-   **Карточка оборудования.** Убраны поля класс и производитель.
-   **Точка зрения.** В точку зрения для справочников добавлен скрипт проверки перед прочими операциями (добавление/изменение папки, удаление элемента или папки, перемещение из папки в папку при нажатии остальных кнопок).

| **Код операции** | **Доп. параметры**                                                                                                      | **Описание операции**                                                                                                                               |
|------------------|-------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------|
| PRINT            | ДОППАРАМЕТР - код отчета печатной формы                                                                                 | Вызывается перед печатью форм (кнопка Печать)                                                                                                       |
| SENDDATA         | ДОППАРАМЕТР - код выбранного шаблона                                                                                    | Вызывается перед отправкой данных в филиал по шаблону при нажатии кнопки Отправить данные                                                           |
| LOADDATA         |                                                                                                                         | Вызывается при нажатии кнопки Загрузить данные                                                                                                      |
| COMMONPROPS      | ДОППАРАМЕТР - 1 - не расширенные, 2 - расширенные                                                                       | Вызывается при нажатии кнопки Установка общих реквизитов                                                                                            |
| ADDCARD          |                                                                                                                         | Вызывается перед добавлением новой карточки                                                                                                         |
| EDITFOLDER       |                                                                                                                         | Вызывается перед вызовом папки на редактирование                                                                                                    |
| EDITELEMENT      |                                                                                                                         | Вызывается перед вызовом элемента на редактирование                                                                                                 |
| DELETEITEMS      |                                                                                                                         | Вызывается перед удалением / переносом в архив                                                                                                      |
| VIEWITEM         |                                                                                                                         | Вызывается перед просмотром элемента                                                                                                                |
| ADDFOLDER        |                                                                                                                         | Вызывается перед добавлением новой папки                                                                                                            |
| ENTERITEM        |                                                                                                                         | Вызывается в момент отметки(выбора) элемента/папки и перед просмотром/редактированием элемента папки.                                               |
| MOVEITEMS        | ДОППАРАМЕТР - ИД папки получателя                                                                                       | Вызывается перед началом перемещения элементов / папок справочника                                                                                  |
| COPY             |                                                                                                                         | Вызывается при нажатии кнопки Копировать                                                                                                            |
| CUT              |                                                                                                                         | Вызывается при выборе пункта Вырезать                                                                                                               |
| PASTE            |                                                                                                                         | Вызывается перед вставкой скопированных элементов                                                                                                   |
| BARCODE          | ДОППАРАМЕТР - прочитанный ШК                                                                                            | Вызывается при чтении ШК после обработки прочитанного ШК профилем сканера, если такой есть.                                                         |
| DESTROYITEMS     |                                                                                                                         | Окончательное удаление элементов и папок                                                                                                            |
| RECALL           |                                                                                                                         | Возврат из архива                                                                                                                                   |
| DETAILS          | ДОППАРАМЕТР - код выбранного отчета                                                                                     | Вызывается при выборе расшифровки в контекстном меню                                                                                                |
| CREATEDOCUMENT   | ДОППАРАМЕТР - код выбранного документа                                                                                  | Для справочника товаров. Вызывается перед созданием документа из списка товаров                                                                     |
| PREPAREDOCUMENT  |                                                                                                                         | Для справочника товаров. Вызывается перед инициализацией кнопки с выбором документа для создания. Если скрипт вернет ЛОЖЬ, то кнопка будет не видна |
| OTHER            | ДОППАРАМЕТР - выбранная операция.  1 - Работа с ценниками,  2 - Работа с ШК,  3- Обмен с оборудованием, 4- Группы весов | Для справочника товаров. Вызывается при выборе пункта меню кнопки Работа с оборудованием                                                            |
| COPYALL          |                                                                                                                         | Для справочника товаров. Копирование всех подчиненных карточек                                                                                      |
| NEXTCODE         |                                                                                                                         | Для справочника товаров. Нажатие на кнопку Новый код                                                                                                |

-   **Форма обмена с оборудованием.** Для выгрузки скидок убрана проверка на производителя из карточки оборудования, т.к. мешала выгружать в нужное оборудование.
-   **Форма обмена с оборудованием.** Добавлена выгрузка объектов скидок для ФР
-   **Библиотеки функций.** Добавлена возможность копирования функций из библиотеки в библиотеку.
-   **Библиотеки функций.** Добавлен поиск по всем функциям.
-   **Вычислитель.** Изменена работа функции **ПЕРЕМЕННАЯ**( Имя, ЗначениеПоУмолчанию). Ранее функция вычисляла только значение переменной. Теперь добавлены константы и понятия.
-   **Вычислитель.** Функция **СТРОКАИЗМАССИВА( )**. Теперь, если в качестве параметра передана строка, то она же и возвращается.
-   **Вычислитель.** Функция **СТРОКА( )**. Если передан двоичный массив, то возвращается его байтовое представление в hex виде - 0x0102030… Ранее возвращалась пустая строка.
-   **Вычислитель.** В функцию **ДОБАВИТЬКОНТЕКС( )** добавлено предварительное удаление такого же контекста. Так как ранее этого не было, то периодически возникали проблемы с исчерпанием памяти.
-   **Вычислитель.** Функция **ФАЙЛЗАПИСАТЬ( ).** Теперь первым параметром может идти имя файла. Тогда, если файл с указанным именем существует, то он будет дополнен и сразу закрыт. Если не существует, то создан записан и закрыт.
-   **Вычислитель.** Функция **ФАЙЛЗАПИСАТЬСТРОКУ( ).** Теперь первым параметром может идти имя файла. Тогда, если файл с указанным именем существует, то он будет дополнен и сразу закрыт. Если не существует, то создан записан и закрыт.
-   **Вычислитель.** Функция **АРХИВ( ).** Добавлена возможность работы с кириллическими именами файлов.
-   **Вычислитель.** Изменено правило сложения строк и двоичных массивов. Теперь сложение строки и массива аналогично вызову функции **СТРОКА( )** для массива и сложение с полученной строкой. Ранее переменные таких типов не складывались.
-   **Модуль ЕГАИС.** Добавлена константа **\_ЕГАИСНЕСОЗДАВАТЬКОНТРАГЕНТОВ** позволяющая не создавать контрагентов в процессе загрузки документов.
-   **Модуль ЕГАИС.** Добавлена константа **\_ЕГАИСНЕСОЗДАВАТЬТОВАРЫ,** позволяющая не создавать товары в процессе загрузки документов.
-   **Модуль Маркировка.** В загрузку входящих документов добавлен фильтр на группу маркировки из параметров модуля. Ранее, т.к. фильтра не было, в случае если использовалось две и более групп маркировки, то входящие ТТН попадали в «чужой» список документов.
-   **Модуль Маркировка.** Добавлена константа **\_МАРКИРОВКАНЕСОЗДАВАТЬКОНТРАГЕНТОВ,** позволяющая не создавать контрагентов, в процессе загрузки данных.
-   **Модуль Маркировка.** При отправке извещения о получении УПД из Такском теперь ЭДО ИД поставщика берется из входящего файла card.xml, а не из справочника контрагентов.
-   **Модуль Маркировка.** Изменено имя файла извещения о получении. Теперь в имени файла указывается полный ЭДО ИД поставщика, а не только ИД оператора ЭДО.
-   **Загрузка ТОРГ-12.** Добавлена обработка УПД в новом формате.
-   **МРП 2.** Добавлено деление журналов сообщений и ошибок на части, при достижении размера файла 3Мб. Старые журналы удаляются (более 5 штук назад).
-   **МРП 2.** Исправлена проблема расчета скидки, при цене (сумме) позиции равной нулю. Была проблема возникновения inf в такой операции.
-   **МРП 2.** Информация о начислениях и списаниях бонусов, оборотов по дисконтным картам, изменения баланса платёжных и подарочных карт, добавлена в распределенную базу. Поэтому, **после обновления базы данных, при первом обмене информацией между центром и кассой, может сформироваться большой массив передаваемых данных.**
-   **Форма запроса количества при подборе товара из документа.** Добавлена возможность чтения веса с весов (клавиша F9).
-   **Обработка загрузки в 1С БП.** Теперь если в экспорт будет добавляться реквизит для документа, строки документа или справочника с типом "Справочник, Перечисление, План счетов" и для этого реквизита в обработке не прописано персональное правило для определения значения, то поиск значения будет происходить по общим для типа реквизита правилам (для справочника по коду и наименованию, для перечисления по названию перечисления и его значению, для плана счетов по коду). Данное изменение позволит упростить процедуру добавления полей в выгрузку в 1С.
-   \- **Обмен с 1С**. Доработан шаблон экспорта в 1С Бухгалтерию 3.0:
    -   Добавлена возможность выбирать типы выгружаемых документов в момент выгрузки.
    -   Добавлена возможность выгрузки начальных остатков в 1С документом "**Ввод начальных остатков**". Остатки при этом рассчитываются на дату начала выгрузки, а записываются в 1С на 1 день раньше даты начала выгрузки.
    -   Добавлен новый вариант выгрузки документа **Выпуск и комплектация** с операцией "**Сборка**" в документ 1С "**Отчет производства за смену**". Выбор варианта выгрузки производится в параметрах экспорта (**Внимание! Не забудьте обновить справочник Сервис/Настройка системы/Настройка параметров системы с сайта**). При активации нового варианты выгрузки для производства любая сборка продукции выгружается в **Отчет производства** за смену, а документы Выпуск и комплектация с операцией "**Разборка**" выгружается как и раньше в **Комплектацию** с видом "**Разукомплектация**".
    -   В единый шаблон экспорта добавлены параметры, позволяющие производить выгрузку без товаров со свёрткой номенклатуры по НДС. При использовании такой выгрузки имеются некоторые особенности:
        -   себестоимость товаров переносится в количество.
        -   для документов прихода цена устанавливается равной 1, а для документов расхода пересчитывается как сумма / количество
        -   документ ввода начальных остатков не переносится
-   **Профили оборудования.** Добавлен обмен с **Бифит.Касса** по **API**. Доступно два варианта обмена:
    -   для бесплатный тарифов без папок через профиль "**RESTAPI. Обмен данными с Бифит.Касса (выгрузка по API)**"
    -   для платных тарифов с папками через профиль "**RESTAPI. Обмен данными с Бифит.Касса (Выгрузка по API-CSV)**".
-   **Профили оборудования.**  Обновлен профиль для работы с ККТ Меркурий. Улучшена его совместимость с МРП 2.
-   **Модуль Маркировка.** Исправлена ситуация с отправкой подтверждения в ЭДО Такском, завершавшаяся сообщением о необработанных служебных сообщениях.

## Версия 4.3.2

-   **Модуль ЕГАИС.** Добавлен запрос извещения сервера ЕГАИС о возможности работать в версии формата 4.
-   **Модуль Маркировка**. Изменена авторизация с токена клиента на ИД соединения. После обновления необходимо заполнить ИД Соединения в параметрах модуля.
-   **Модуль Маркировка. Маркировка остатков**. В полях "**Способ ввода в оборот**" и "**Тип КМ**" выведены названия вместо кодов.
-   **Модуль Меркурий.** В списке входящих сертификатов добавлена возможность изменить статус сертификата из контекстного меню.
-   **Оперативная сводка по ККМ v.2**. Отображение колонок **Код товара** и **Артикул** поставлено в зависимость от соответствующих параметров системы.
-   **Оперативная сводка по ККМ v.2**. Из загрузки данных (продаж) для оперативной сводки по ККМ убраны чеки с типом 18.
-   **Документ Приходная накладная**. Расчет розничной цены. В расчет добавлено время накладной. Ранее была только дата, что могло приводить к неверным результатам при наличии более одной переоценки в день.
-   **Документ Внутреннее перемещение**. В сообщения при проверке данных для ЕГАИС добавлены коды товаров.
-   **Документ Внутреннее перемещение**. Из распределения номеров справок Б при возврате продукции из розничного регистра убраны справки с помарочным учетом..
-   **Схема РМК**. Добавлен параметр, позволяющий выводить окно оплаты всегда отдельным окном, а не в правой панели.
-   **Параметры командной строки запуска**. Добавлен ключ /sb - пропустить резервное копирование при запуске.
-   **Загрузка данных из фронт-систем**. Добавлен разбор всех кодов марок из строки продажи с определением алкокода по каждой марке. В случае совпадения всех алкокодов, полученный результат записывается в строку с товаром. Ранее не было разбора на отдельные марки.
-   **Справочник товаров**. В карточку товара добавлена группа маркировки Молочная продукция.
-   **Справочник контрагентов**. Добавлена проверка перед удалением карточки на предмет использования в качестве импортера в приходных накладных.
-   **МРП 2**. Добавлена возможность создания документа **Заказ от покупателя**.
-   **МРП 2**. В визуальный поиск добавлена возможность поиска только в текущей папке
-   **Загрузка электронных накладных**. Добавлена возможность загружать GTIN в карточку товара.
-   **Документ кассовой смены**. При формировании ДКС из данных кассовых транзакций ФР (в основном для МРП1), в случае наличия нескольких безналичных оплат в чеке, сумма безнала в ДКС складывается из всех безналичных сумм (безнал, кредит, сертификат), указанных в чеке. Ранее была только сумма из безналичных сумм (безнал).

## [Более ранние версии](/history/oldfunctionalities)
# Изменения печатных форм и отчетов

## Версия 4.4.7
- Добавлен универсальный отчет по чекам, полученным из Айтида РМК
- Добавлен отчет по остаткам ТМЦ на складах с выводом колонки "Количество заказанного". При расчете количества заказанного товара учитываются проведенные заказы покупателей, у которых срок отгрузки больше либо равен дате отчета и это количество еще не отгружено.

## Версия 4.2.5

-   Добавлен отчет Средние продажи по складам (из кассовых транзакций)

## Версия 4.0.7

-   Этикетки для печати кодов маркировки обуви.

## Версия 4.0.5

-   Отчет по остаткам и оборотам алкомарок
-   Отчет Продажи товаров v.2 (с убылью)
-   Отчет Продажи товаров v.2 (транспонированный)
-   Печать новых марок PDF-417
-   Продажи по дисконтным картам по дням
-   Статистика с выгрузкой в Excel
-   Ценник бутик multi (количество характеристик по остатку)

## Более ранние версии

### Версия 4.0.3

-   Добавлен отчет «Статистика с выгрузкой в Excel». Отчет может быть рассмотрен как пример вывода изображений в Excel.
-   Добавлен отчет «Печать новых марок PDF-417».
-   Добавлен отчет «Отчет Продажи товаров v.2 (транспонированный)».
-   Добавлен отчет «Отчет по остаткам и оборотам алкомарок».
-   Добавлен отчет «Отчет по НДС v.2».

### Версия 3.7

-   Форма сверки с поставщиками алкоголя. Из сверки убраны не проведенные документы..

### Версия 3.6

-   Добавлен отчет Классификация чеков.
-   Добавлены отчеты для анализа выручки с графиками.
-   В печатные формы Торг-12 добавлена возможность вывода вес. Для этого необходимо установить константу системы \_ПЕЧАТЬ_ТОРГ_12_ВЕС в значение **Истина**.
-   Добавлен отчет Раскладка по ингредиентам за период.
-   Добавлены отчеты для печати сверки с поставщиками по алкоголю.

### Версия 3.5

-   Добавлен отчет Журнал ПКО с итогами по дням.

### Версия 3.4.5

-   Добавлен отчет по бонусам v.2 с возможностью формирования по нескольким складам/филиалам.
-   Оперативная сводка по взаиморасчетам. При сортировке по колонкам сумм теперь сортируется по двум колонкам сразу.

### Версия 3.3.5

-   Добавлен отчет по движениям алко-кодов. Подробнее см. [Инструкция по работе с модулем ЕГАИС](/egais/working#отчет-по-остаткам-и-оборотам-алкокодов).
-   Добавлен отчет по движениям справок А и Б.
-   Добавлен отчет для печати марок, полученных в ответ на запрос нечитаемых марок в ЕГАИС.

### Версия 3.3.3

-   Добавлена печатная форма для документа Инвентаризация ЕГАИС.

### Версия 3.2.0

-   В отчет движение товаров v.2 добавлена возможность выводить только товары без движения, или товары без движения, но с остатком.
-   В формах ТОРГ 12 заменен процент НДС на его название.
-   Добавлен отчет по остаткам ТМЦ с размерной сеткой.
-   Добавлен отчет по остаткам и оборотам ТМЦ с размерной сеткой и изображением.

### Версия 3.1.8

-   Добавлен отчет Журнал продаж алкогольной продукции с учетом технологии вскрытия тары.
-   Добавлены варианты алкогольных деклараций (отчеты и выгрузки в XML), реализующие изменения в работе с расходными накладными в ЕГАИС (возвраты поставщикам и внутренние перемещения).

### Версия 3.00.05

-   Добавлен отчет Взаиморасчеты с клиентами v.2 (со складом).
-   Добавлен отчет Журнал отчетов ККМ с видами оплат из Frontol.

### Версия 3.00.01

-   Добавлен отчет Анализ изменения себестоимости v.2.
-   Добавлен отчет Отклонения размера торговой наценки v.2
-   Из форм Торг 12 убрана графа Цена с НДС, т.к. ее нет в унифицированной форме.

### Версия 3.00.00

-   Добавлен отчет Отчет - продажи сотрудниками (итоги и прибыль).

### Версия 2.99.50

-   Добавлена печатная форма Список для инвентаризации v.2 (для документов).
-   Добавлены печатные формы Счет фактура (для печати из приходной накладной) и Торг-12 (для печати из приходной накладной).
-   Добавлен отчет по контрагентам с договорами v.2.
-   Обновлены формы счета-фактуры, книги покупок и книги продаж.
-   Добавлен Отчет динамика выручки V2 с выбором нескольких складов.
-   Добавлен отчет Отчета сравнения закупочных цен или цен продажи.

### Версия 2.99.45

-   Добавлен Отчет динамика выручки с разбивкой по кассам.
-   Добавлен товарный отчет, с возможностью формирования по нескольким складам с одинаковой категорией цены.

### Версия 2.99.40

-   Добавлена печатная форма и шаблон выгрузки Алкогольной декларации с расчетом производителей из приходных накладных.

### Версия 2.99.35

-   Добавлена печатная форма распределения товаров по складам

### Версия 2.99.30

-   Добавлена печатная форма Универсального передаточного документа.
-   Добавлен отчет Анализ заказов поставщикам v.2.
-   Добавлен отчет Кассовая книга v.2.

### Версия 2.99.22

-   Добавлена печатная форма ТОРГ-15 с себестоимостью.

### Версия 2.99.15

-   Добавлена печатная форма для журнала документов по контрагентам
-   Добавлена печатная форма для журнала документов по контрагентам и таре.
-   Добавлен отчет Росстат алкоголь УЧЕТ ОБЪЕМА РОЗНИЧНОЙ ПРОДАЖИ АЛКОГОЛЬНОЙ ПРОДУКЦИИ.
-   Добавлен отчет Реестр документов v.2
-   Добавлен вариант товарного отчета с учетом акций.

# Внесены следующие исправления:

## Версия 4.4.0

-   **Сервис/Параметры системы/Категории цен.** Исправлена проблема, выбора алгоритма округления, в случае, если ранее выбранный алгоритм был удален из справочника алгоритмов округления. Возникала ошибка нехватки памяти.
-   **Карточка контрагента.** Исправлена проблема, когда в поле Категория цены было указано неверное значение, т.е. не из списка категорий цен, то программа могла аварийно закрываться.

## Версия 4.3.8

-   **Модуль ЭДО.** Исправлена ошибка при открытии параметров модуля без NFR лицензии.
-   **Загрузка электронных накладных**. Исправлена ошибка, возникавшая при загрузке приходных накладных с указанием округления загружаемой розничной цены.

## Версия 4.3.2

-   **Модуль ЕГАИС.** Форма проверки документа. Исправлена ошибка расчета количества прочитанных марок.
-   **Переоценка ТМЦ.** Исправлена ошибка проведения, которая возникала при проведении документа, у которого по какой либо причине первая переоцениваемая категория цены не была указана, но были указаны вторая и/или далее.

## Версия 4.2.5

-   **Модуль МРП 2 .** Исправлена ситуация с выбором товара из пустого списка. Добавлялась пустая строка в чек.

## Версия 4.2.2

-   **Форма проверки документа модуля Маркировка.** В окне чтения марок, открываемом из колонки М, убрана кнопка выбора марок, т.к. она в этом случае не нужна.
-   **Документы и форма проверки документа модуля Маркировка.** В окне чтения марок, открываемом из колонки М, добавлена возможность чтения кодов маркировки.
-   **Упрощенная карточка товара**. Исправлена ошибка создания переоценки. Создавался документ только по управленческому учету. Теперь сделано стандартно по всем необходимым учетам.

## Версия 4.2.1

-   **Модуль Маркировка.** Исправлена ошибка загрузки УПД. Ранее GTIN, выделяемых из кодов маркировки обрезался на один символ.
-   **Модуль Маркировка.** Исправлена ошибка создания товара в форме проверки УПД. .Неверно определялась папка, в которой необходимо создавать товар. Из-за этого в новые карточки не переносились данные из группы товара, связанной с папкой.

## Версия 4.2.0

-   **МРП 2** Исправлена ошибка, в результате которой в некоторых случаях неверно работало округление чека в большую сторону (наценка).
-   **Параметры пользователя.** Исправлено сохранение параметра Двойной клик в справочниках.

## Версия 4.1.5

-   **МРП 2** Исправлена ошибка, в результате которой не работало закрытие чека "одной кнопкой" с любой оплатой, кроме наличных.
-   **МРП 2** Исправлена ошибка, в результате которой в очень редких случаях удавалось дважды сохранить и напечатать один чек, как два разных. Предположительно, из-за повторного срабатывания клавиатуры при оплате "одной кнопкой" с клавиатуры.
-   **МРП 2.** Исправлена ошибка, возникавшая при печати копии чека в случае, если в базе были чеки не только числовыми номерами. Но и буквенно-цифровыми.
-   **МРП 2.** Исправлены ошибки, в результате которых при наличии в **схеме РМК** в списке товаров папок и групп товаров с кодами, пересекающимися с кодами товаров, при подборе такого товара в чеку выводилось название папки/группы, а не самого товара.
-   **МРП 2.** Исправлена ошибка загрузки скидки из отложенного чека. Не восстанавливался параметр проверяющий, введена ли карта. Так же теперь восстанавливается не само расчетное значение скидки, а выражение из справочника. Значение пересчитывается заново.
-   **Модуль Меркурий.** Исправлена ошибка, в результате которой модуль не открывался на закладке Отгрузка, если ранее была сортировка по номеру документа.
-   **Модуль Меркурий.** Исправлена ошибка, в результате которой не загружались ВСД большого объема.
-   **Журнал документов по контрагенту**. Исправлена ошибка, из-за которой открытие журнала без выбранного контрагента происходило очень долго, а в журнале отображались все документы всех контрагентов.
-   **Схема РМК**. Исправлена ошибка, не позволявшая добавить в список оборудования РМК весы без печати этикеток.

## Более ранние версии

### Версия 4.1.0

-   **Инвентаризация ТМЦ**. Исправлена ошибка, возникавшая при добавлении документа в документ. При первом добавлении товара не заполнялось поле Фактическое количество.

### Версия 4.0.6

-   **МРП 1 и МРП 2.** Теперь при печати чека переменная ВСЕГОНАЛ содержит значение за вычетом сдачи, если такая была.
-   **МРП 1**. При чтении марки маркированной продукции теперь марка сразу записывается в чек и не требует повторного чтения.
-   **Модуль Меркурий.** При создании контрагента из данных ГИС Меркурий добавлено заполнение поля Юр. адрес карточки контрагента.

### Версия 4.0.5

-   **Модель ЕГАИС**. Окно проверки документа. При чтении новой марки, даже если определился алкокод и продукция с таким алкокодом есть в документе, но, при этом, самой марки нет в документе, то будет выведено сообщение и марка будет проигнорирована. Ранее марка присваивалась найденной по алкокоду строке документа.
-   **Модуль ЕГАИС**. Параметры модуля. Исправлена ситуация, когда могли не удаляться старые настройки модуля, для УТМ, удаленных из списка.
-   **МРП 1 и МРП 2**. Исправлены ошибки округления суммы чека и распределения суммы округления по позициям, в случае задания минимальной цены/максимальной скидки на товары.
-   **Модуль Меркурий**. Добавлена проверка того, что в списке отмечены ВСД для создания приходной накладной. Ранее создавалась пустая накладная.
-   **Модуль Меркурий.** Оптимизированы запросы в ГИС Меркурий о получении информации о партнерах и продукции.
-   **Документы. Приходная накладная**. При чтении новой марки, даже если определился алкокод и продукция с таким алкокодом есть в документе, но, при этом, самой марки нет в документе, то марка будет проигнорирована. Ранее марка присваивалась найденной по алкокоду строке документа.
-   

### Версия 4.0.4

-   **Модуль регистрации продаж v.1.** Исправлена ошибка округления чека, дававшая разницу между суммой ДКС и z-отчетом.

### Версия 3.9.4

-   **Переоценка ТМЦ в валюте.** Исправлен пересчет сумм из валюты в рубли.
-   **Документы. Выбор валюты документа**. Исправлена ситуация, при которой при выписке на основании переносился курс из старого документа, а не рассчитывался текущий.

### Версия 3.9.3

-   **Оперативная сводка.** Исправлена ошибка в оперативной сводке по контрагентам. Из-за применения округления не выводились строки, у которых была задолженность только в копейках.
-   **Подбор товара в документы.** Исправлена проблема, возникавшая в случае отсутствия основной цены у товара. Теперь, в такой ситуации цена рассчитывает исходя из склада документа.
-   **Журналы документов**. Исправлена ситуация, при которой была возможность открыть один документ два раза, открыв второй журнал документов этого же типа.
-   **Документ ВиК**. Исправлена ситуации выписки документа на основании. Не заполнялись колонки Склад готовой продукции и Склад ингредиентов из группы ресурсов товара.

### Версия 3.9.2

-   **ГИС Меркурий.** Исправлена ситуация с одновременным гашением нескольких сертификатов. При которой, некоторые из них могли необоснованно перейти в статус «погашен», оставаясь при этом непогашенными.

### Версия 3.9.1

-   **Выпуск и комплектация.** Исправлена ошибка, не дававшая правильно сохранить документ, в случае изменения состава выпускаемой непосредственно в документе.

### Версия 3.9

-   **Оперативная сводка по взаиморасчетам.** Исправлены расчеты задолженностей при группировке данных по папкам.
-   **Форма регистрации продаж**. Исправлена запись видов оплаты для Сертификата, Кредита и Прочего.

### Версия 3.7.5

-   **Документы**. Исправлена ошибка в расчете недостающего товара для пересортицы ТМЦ. Ранее не группировались товары с разными единицами измерения. В результате, по каждой строке по отдельности могло хватать остатков на складе, а при проведении документа списания возникали отрицательные остатки.
-   **Модуль регистрации продаж.** В пересчет скидок добавлено определение переменной \_СУММАКОПЛАТЕ после расчета скидок на позиции и перед расчетом скидок на чек. Без этого некорректно считались скидки на чек, зависящие от суммы позиций чека.
-   **Модуль регистрации продаж**. В форме подключения к ФР убрано окно, сообщающее об успешном подключении, т.к. реально определить было ли подключение в этом месте нельзя.

### Версия 3.7.0

-   **Форма сопоставления документов**. Исправлена проблема сопоставления одинаковых документов, но с разными знаками. Например, приходная накладная и приходная накладная с отрицательной суммой.
-   **Модуль регистрации продаж.** Загрузка другого чека. Исправлено заполнение поля Операция.
-   **Модуль регистрации продаж.** Форма загрузки другого чека. Исправлена ошибка, возникавшая при нажатии ENTER в поле Дата.
-   **Документы.** **Документ кассовой смены**. При добавлении услуг не заполнялось поле учетная цена. Исправлено.

### Версия 3.6.0

-   **Модуль регистрации продаж.** Исправлена проблема, возникавшая при печати ранее отложенного чека. Некорректно восстанавливался тип чека. Для алкоголя не восстанавливался признак алкоголя. В результате, чек не отправлялся в ЕГАИС.

### Версия 3.5.6

-   **Модуль регистрации продаж.** Исправлено заполнение поля склад в ДКС, формируемых из МРП. Ранее склад всегда брался из группы ресурсов. Добавлен анализ параметр Брать склад из группы ресурсов, формы обмена с оборудованием.
-   **Модуль регистрации продаж.** Исправлен расчет и печать скидок при загрузке отложенного чека.
-   **Модуль регистрации продаж.** Исправлено сохранение признака **Создать отдельный документ** в форме расчета с покупателем.
-   **Инвентаризация ТМЦ и ЕГАИС.** Исправлен пересчет количества при смене единицы измерения в строке документа.
-   **Модуль ЕГАИС.** Исправлено распределение алко-кодов в документе **Вскрытие тары**, в случае, если в документе выбрана единица измерения, отличная от учетной.

### Версия 3.5.5

-   **Работа с ЕГАИС.** Исправлен вывод сообщения об ошибке, при отправке расходной накладной. Не выводилась причина ошибки.

### Версия 3.4.5

-   **Работа с ЕГАИС.** Инвентаризация ЕГАИС. Исправлена ситуация, при которой не происходило заполнение документа остатками на складе, в случае, если документ был отсортирован по колонке Реальное количество.
-   **Документы.** Исправлена ошибка, в результате которой, в документах не было возможности выбрать единицу измерения для услуги.

### Версия 3.4.0

-   Исправлена ситуация, при которой, при загрузке Инвентаризации ЕГАИС, в случае наличия у товара одинаковых доп. единиц, происходило задвоение загружаемых данных по такому товару.

### Версия 3.3.3

-   При загрузке ДКС из оборудования, нумерация документов приведена в соответствие с правилам нумерации, настроенными для этого документа.
-   Исправлены ошибки в работе модуля ЕГАИС: отправка списаний, отправка списаний по ДКС, прием инвентаризаций ЕГАИС.
-   Исправлена загрузка транзакций оплаты для профилей Xpos и Фронтол 4. Проблема заключалась в том, что сумма транзакции бралась из другого поля, что в некоторых ситуациях не позволяло формировать отчет по видам оплаты.
-   Исправлена ситуация, при которой при копировании счета исходящего и последующей смене контрагента пересчитывались цены, даже если у контрагента не указана колонка прайс листа.

### Версия 3.2.1

-   Исправлена ошибка, в результате которой, при сохранении документов, совершаемом при нажатии кнопки Проведение/отмена проведения, не загружались обратно в форму документа значения расширенных колонок документов. Проверить сохранение документов из всех возможных ситуаций.
-   Исправлена ошибка в модуле доставки данных, приводившая к отказу в приеме файлов с длинными именами.

### Версия 3.2.0

-   Исправлена ошибка отображения суммарного количества подчиненных карточек на складах при нажатии клавиши F5 в справочнике товаров на карточке товара, имеющей подчиненные.
-   Исправлена ошибка расчета недостающей производимой продукции из документа ВиК. Склад отправитель брался из шапки документа, даже если был указан в строке документа.
-   Исправлена проблема автоматического применения скидок в форме регистрации продаж, в случае, если при первоначальном расчете значение скидки было равно нулю.
-   Исправлена ошибка создания пересортицы из ДКС связанная с пересчетом единиц измерения.
-   Исправлена ошибка в инвентаризации ТМЦ связанная с пересчетом себестоимости с коэффициентом доп. единицы.
-   Исправлена проблема не сохранения обновленных названий в форме подчиненных товаров.

### Версия 3.1.6

-   Исправлена отправка ИД справки Б в ответном акте и расходной накладной в ЕГАИС.

### Версия 3.1.5

-   Исправлены расчеты начальных остатков в отчетах Движение товаров V2 (во всех вариантах) и в отчете Движение денежных средств в разрезе статей расходов и доходов. Остаток считался на конец первого дня периода, а не на его начало.
-   В декларациях (печатных формах) увеличено количество знаков после запятой до 4.
-   В загрузку накладных из ЕГАИС внесены изменения предотвращающие загрузку одинаковых накладных в один сеанс обмена.

### Версия 3.00.08

-   Исправлена проблема, возникавшая с клавиатурными сканерами, использующими префикс, при чтении ШК, содержащих буквы. Некоторые сканеры передают дополнительные управляющие символы.

### Версия 3.00.01

-   В документе Переоценка исправлена ошибка, в результате которой переоценивалась только первая колонка с ценой.

### Версия 3.00.00

-   Исправлена ошибка, возникавшая при пере проведении одиночного документа в журнале документов.
-   Изменен расчет предыдущей цены реализации в переоценке. Ранее предыдущая цена считалась без учета закончившихся акций, что приводило к расхождениям, между суммой документа и печатными/отчетными формами.
-   Исправлена ошибка пересчета введенной вручную цены в форме запроса характеристик и в форме подбора товара по коду. При подборе с использованием этих форм введенная цена дополнительно умножалась на курс, что неверно.
-   Исправлена ошибка автоматического сохранения документов без спецификации.
-   В форме регистрации продаж добавлена передача параметров в обработку открытия чека профиля ФР.

### Версия 2.99.50

-   Выписка документа ВиК на основании других документов (стандартный функционал выписки на основании). Исправлена ошибка установки признака сборка, из-за которой неверно опредлялся состав продукции.
-   Исправлена ошибка, которая иногда появлялась при использовании окна задач, при большом количестве окон в системе.
-   Во внутренних отчетных формах исправлена ошибка, в результате которой некорректно отрабатывалось нажатие на ESC (не убиралась кнопка из панели задач) и не передавались нажатия на клавиши курсора отчетной форме.
-   В форме запроса количества и цены исправлена ошибка, в результате которой цена рассчитанная как цена "по умолчанию" не умножалась на курс документа, а подставлялась в валюте учета.
-   В карточке оборудования исправлено сохранение адреса доставки.
-   Исправлена ситуация, в результате которой, если файл с данными из другого филиала приходил испорченным или не полностью копировался, то считалось, что ошибок нет и отправлялся корректный файл ответа о приеме данных.
-   Исправлена ситуация, при которой не обновлялись внутренние отчетные формы при установке фильтра и смене папки, в случае, если номер строки не изменялся.
-   В расчет объектов схем скидок внесено изменение предотвращающее появление объектов с пустыми картами, если ни одна карта из выбранного в схеме списка не удовлетворила условию скидки.
-   Исправлен расчет количества, необходимого к выпуску при формировании ВиК из Инвентаризации. Ранее расчет производился от разницы между расчетным количеством и фактическим, за минусом текущего остатка. Теперь оставлено только фактическое количество, за минусом текущего остатка.
-   Исправлена загрузка сохраненной ручной скидки на чек.

### Версия 2.99.45

-   Внесены исправления в установку расширенных реквизитов из пользовательского кода в карточки товаров и документы (не устанавливались реквизиты в документах и не устанавливались реквизиты, значения которых брались из справочников, а не аналитик).
-   Исправлено копирование расширенных реквизитов при копировании документов (не переносились реквизиты в новый документ).
-   Изменен расчет цены реализации для услуг. Теперь если на услуги нет переоценки, то цена берется из справочника. Изменение внесено в хранимую функцию dbo.fn_calcclev_cena().
-   В конфигурациях, в которых нет возможности работы с весами с печатью этикеток, в справочнике товаров, из меню кнопки Дополнительные возможности убран пункт Работа с группами весов. Усилен контроль при выборе оборудования в форме обмена, для оборудования, которого нет в используемой конфигурации.
-   Исправлена проблема , возникавшая при автоматическом сохранении документов и одновременном выборе товаров из справочника. Проблема состояла в том, что если момент сохранения документа приходился на ввод количества в форме запроса количества, то введенные данные не передавались в документ.
-   Исправлена ситуация в расходной накладной, при которой при повторном добавлении товара в документ, в случае наличия запрета на повторяющиеся строки, курсор текущей строки переходил в конец списка товаров.
-   Исправлена ошибка, в результате которой не всегда определялся товар по ШК, если в таблице ШК были ошибки, т.е. были записи без ссылок на товар.
-   Исправлена ошибка в документе Выпуск и комплектация, в результате которой, при ручном изменении состава неверно применялся вариант расчета себестоимости изготавливаемого изделия/блюда.
-   Исправлена ошибка в загрузке изображения в карточку товара, в результате которой, загруженный файл удалялся.

### Версия 2.99.40

-   Документ Калькуляция. Исправлена ситуация с расчетом процента отходов. Процент отходов не пересчитывался автоматически при вводе количества нетто или брутто

### Версия 2.99.35

-   Исправлена ошибка в форме Распределения товара, приводившая к не заполнению поля филиал получатель в создаваемых ВНП

### Версия 2.99.30

-   Исправлена ошибка несанкционированного удаления файлов с FTP сервера, при неудачной доставке данных.
-   Исправлено получение электронной почты с почтовых серверов не сообщающих количества писем на сервере.
-   Исправлена ошибка предварительной очистки почтового ящика в форме обмена с оборудованием 2.1 и 2.2.
-   Исправлена ошибка, в результате которой не выполнялся скрипт проверки возможности отмены проведения, при отмене проведения из формы документа.

### Версия 2.99.24

-   Исправлена ошибка, возникавшая в справочниках при исключении из списка отображаемых колонок, колонок участвующих в определении цветов строк.
-   Исправлена работа профилей обмена с ККМ, в случае указания конкретной даты загружаемого документа. Ранее, могла искажаться дата загружаемых транзакций.
-   Исправлена ошибка определения цены товара в приходной накладной при чтении ШК, содержащего дополнительную единицу измерения с коэффициентом цены.
-   Исправлена ошибка доставки (получения) данных с использованием SSL в форме обмена с филиалами и обмена с оборудованием.
-   Исправлена ошибка сохранения расширенной истории изменений.

### Версия 2.99.22

-   Исправлена ситуация, при которой при ручном добавлении ингредиентов в состав блюда в документе Выпуск и Комплектация, для новых ингредиентов не устанавливался склад списания, равный складу списания ингредиентов основного блюда.
-   Исправлена ситуация, при которой при ручном добавлении автоматически собираемых блюд в состав блюда в документе Выпуск и Комплектация, было излишнее округление количества, что могло привести к обнулению количества ингредиентов.
-   Исправлена работа удаленного добавления карточек товаров в случае, когда в центре устанавливаются права на каждую папку товаров.
-   Исправлена ошибка загрузки чека в форме регистрации продаж. Не загружалась цена продажи.

### Версия 2.99.15

-   Исправлена ошибка, возникавшая при нажатии кнопки Просмотр в форме с характеристиками товара.
-   Исправлена ошибка сопоставления выписки из банка второго и более платежей автоматически по всем учетам.
-   Исправлена ошибка расчета суммы остатка в отчетах по контрагентам v.2
-   Исправлена ошибка загрузки транзакций из ФР при указании диапазона дат со временем в форме обмена данными с оборудованием.
-   Исправлены ошибки округления цены и количества при пересчете единиц измерения в документах.
-   В форме работы с характеристиками исправлена работа кнопки восстановления названия. Ошибочно добавлялись коды характеристик к их названиям.
-   Исправлена проблема возникавшая при удалении одиночной пустой папки. Папка продолжала отображаться в списке до его обновления.
-   Изменена функция расчета оборота карт. Ранее расчет был возможен только на текущий момент. Теперь на любой момент времени.
-   Исправлена ошибка пересчета документа ВиК, в случае, когда строки отсортированы по колонке Отметка.
-   Исправлено определение PLU5 при печати ценников. PLU5 – это ПЛУ, которое соответствует весам на указанном в параметрах формы складе.
-   Исправлены отчеты Продажи сотрудниками и Продажи.
-   В форме распределения товара исправлен расчет значений в колонке остаток, с учетом филиала, в котором находится склад расчета. Синхронизация товаров производится по коду в главной базе.
