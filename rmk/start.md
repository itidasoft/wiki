---
title: Подготовка к работе
description: Айтида РМК
published: true
date: 2024-06-18T15:32:22.250Z
tags: лицензирование, рмк, запуск рмк, настройка рмк
editor: markdown
dateCreated: 2022-08-14T20:48:49.016Z
---

# Назначение.

Модуль регистрации продаж (МРП) версии 2 предназначен для замены существующего МРП. В новом модуле сохранен существующий функционал и алгоритмы работы. Изменения коснулись интерфейса с пользователем и программная платформа, на которой реализован модуль. Так же, изменения коснулись настройки работы модуля. Полностью сохранена совместимость с профилями ФР и весов без печати этикеток, работа со сканерами ШК, ГИС ЕГАИС, скидками и дисконтными картами клиентов. Интерфейсные решения позволяют в полной мере использовать возможности сенсорных экранов. В то же время, возможность работы с традиционной клавиатурой и мышью полностью сохранена.

МРП v.2 является функциональной частью системы Айтида, поэтому работает с базой данных Айтиды на том же SQL сервере.

> *Внимание! Работа МРП v.2 совместно с MS SQL сервером версий 2005 и 2008 не поддерживается. Необходимо использовать MS SQL сервер версий 2008R2, 2012 и более поздние.*
{.is-warning}


# Порядок установки рабочего места с МРП v.2 в локальной сети ПП Айтида.

Установка МРП v.2 осуществляется копированием файлов приложения в отдельную папку на рабочем компьютере. При этом должна быть сохранена вложенная структура папок приложения. Регистрации компонентов в системном реестре Windows не требуется. Возможна установка программы в рабочий каталог Айтиды.

> *Внимание! Работа программы в операционной системе Windows XP не поддерживается. Минимальная версия ОС, необходимая для работы МРП v.2 - Windows 7.*
{.is-warning}


После копирования рабочих файлов необходимо создать ярлык для запуска приложения. Ярлык должен содержать указания на рабочую базу данных и сервер, а также на используемый драйвер SQL сервера. Ключ командной строки /sdИмяСервера:ИмяБазы позволяет указать имя рабочего SQL сервера и базу данных. Ключи **/nc11** **/nc13**, необходимо указать только один из них, позволяют использовать один из стандартных драйверов для работы с SQL сервером.

**/nc11** - SQL Server Native Client 11.0;

**/nc13** - ODBC Driver 13 for SQL Server;

Так же в командной строке можно указать логин пользователя, его пароль и адрес сервера лицензий. В качестве пользователя не нужно указывать sa. Необходимо указать реального пользователя из Айтиды, у которого может не быть доступа к системе, но он должен входить в необходимую группу пользователей. Это связано с тем, что в МРП 2 используются настройки из точки зрения, которая указан в группе пользователей. Так же, в командной строке может быть указан ключ **/cs1**. Наличие этого ключа укажет на необходимость использовать альтернативную цветовую схему интерфейса.

Синтаксис параметров авторизации пользователя:

**/u**Логин **/ps**Пароль

Пример.

**/u**idleadmin **/ps**itida

> Если логин не указан, то будет использован по умолчанию **idleadmin** и пароль **itida**.
{.is-info}


Если лицензии Айтида активированы на другом компьютере, то необходимо указать адрес сервера лицензий. Для задания адреса сервера лицензий используется ключ **/xs**IPАдрес:Порт

Пример командной строки.

`C:\Program files (x86)\itida\irmk\irmk.exe /sd(local)\SQL2012:ItidaRetail /xs192.168.1.2 /nc11 /uuser1 /pspassword2`

Пример ярлыка.

![Изображение выглядит как текст Автоматически созданное описание](/images/rmk/start/a83e9b6fa3944223d7544b94b6d88928.png)

> Если при запуске программы было получено сообщение “Запуск программы невозможен, так как на компьютере отсутствует MSVCP140.dll”, то необходимо установить на компьютер библиотеки поддержки, взяв их по [ссылке](https://old.itida.ru/download/distrib/vc140_redist.x86.exe).
{.is-info}

# Порядок установки отдельного кассового узла.

Установка отдельного кассового узла возможна на компьютере, работающем под управлением системы Windows версии 7 и более поздних. Для установки необходимо заранее загруженный файл **irmk_dst_xxx.zip** распаковать в любую папку, для которой разрешен полный доступ для чтения, записи, создания и запуска файлов. Выбранная папка будет являться рабочей папкой модуля.

В списке файлов необходимо найти исполняемый файл **irmksetup.exe** и запустить его на выполнение.

![](/images/rmk/start/53b4f9ac74976a9963c72cda87dffe02.png){.align-center}

Сразу после запуска, программа проверит наличие в системе необходимых для работы сторонних файлов (библиотек времени исполнения). В случае их отсутствия, будет запущена их установка в скрытом режиме. На время установки будет выведено сообщение о подготовке к запуску.

![](/images/rmk/start/c47fc7cbe196af5edf25f65bd60f0d59.png){.align-center}

Установка необходимых файлов может занять до нескольких минут, в зависимости от быстродействия компьютера. В случае успешной подготовки будет запущен основной процесс установки приложения. В некоторых случаях, при использовании ранних не обновленных ранее вариантов Windows 7 в процессе установки файлов поддержки Windows может обращаться и устанавливать собственные обновления. В этом случае, программу установки нужно будет запустить заново.

![](/images/rmk/start/d43d9f11a053fdb3da342ab5e6724679.png){.align-center}

Установка производится пошагово. Первым этапом предлагается активировать лицензии на РМК и подписку на РМК. Для этого, необходимо заполнить поля с ключами лицензий и информацией о клиенте. Все поля являются обязательными для заполнения. При нажатии кнопки Активировать будет произведена активация указанных лицензий.

После активации лицензий можно либо установить, либо подключиться к ранее установленному SQL серверу.

Установка SQL сервера будет доступна в случае, если программа не найдет на компьютере ранее установленных экземпляров сервера. В этом случае переключатель будет в положении **Установить MS SQL сервер** и будет доступна кнопка **Установить**.

При нажатии кнопки установить программа будет искать файл **sqlexpress_x64.exe** (для систем x64) или **sqlexpress_x86.exe** (для систем x86). В случае наличия файла он будет запущен в скрытом режиме. Если такого файла нет, то будет запущена установка варианта LocalDB из файла **SqlLocaLDB_x64.MSI.**

После успешной установки, будет выведено сообщение:

![](/images/rmk/start/47e3075d6c1d10b0c10d6065d63a9dda.png){.align-center}

При наличии SQL сервера или после его успешной установки, можно будет подключиться к нему. Для этого необходимо указать корректное имя входа и пароль.

Для варианта **LocalDB** имя пользователя и пароль игнорируются. При установке **MS SQL Express** для пользователя **sa** устанавливается пароль **Itida2017**

После подключения к серверу будет доступен список баз данных, расположенных на нем. В списке будут не все базы данных, а только базы данных ПП Айтида. Необходимо либо выбрать существующую базу данных для работы, либо установить новую. При установке новая база данных будет располагаться в подкаталоге **base** рабочего каталога.

![](/images/rmk/start/91fda353dc77745abd115d58bc21b6a9.png){.align-center}

В случае наличия в каталоге файла **update_db\*.cab**, т.е. файла со стандартным обновлением структуры базы данных ПП Айтида, то будет активна кнопка **Обновить базу данных [Номер версии]**. Нажатие кнопки вызовет программу IUpdate.exe в автоматическом режиме обновления.

![](/images/rmk/start/f16c45dd1aea86808726a8cb518bb30d.png){.align-center}

После успешного завершения обновления будет выведено сообщение. Если во время обновления возникли ошибки, то они будут записаны в журнал программы IUpdate.exe (Рабочий каталог\\IUpdate\\iupdate.log)

![](/images/rmk/start/8c6e55268ce53873e76b5b20fab75eaa.png){.align-center}

При установке кассового узла часто необходимо загрузить начальные данные, выгруженные из центра. Если такой файл был заранее сформирован в центре, то кнопка **Загрузить файл с начальными данными** позволит его выбрать и загрузить.

![](/images/rmk/start/c228b8b198330ec027e8f1016ca2a499.png){.align-center}

![](/images/rmk/start/7e05fecfefb34e981fe27d2566eef570.png){.align-center}

> Внимание! Если в системе недостаточно памяти, а файл с данными большой, то рекомендуется произвести загрузку файла посредством службы Айтида. Для этого, файл с данными необходимо скопировать в выбранный для этих целей каталог. После настройки (см. далее) и запуска службы файл будет автоматически загружен в базу данных.
{.is-warning}


После загрузки данных можно выбрать **код кассового узла**, **схему РМК** и **код РМК**. Первый параметр будет передан в службу, остальные будут записаны в реестр ОС как параметры рабочего места.

Следующим этапом можно установить и запустить службу обмена данными с центром. Для этого, необходимо указать пароль текущего пользователя ОС и нажать кнопку **Запустить службу обмена данными**. Пароль необходим для устанавливаемой службы. Служба устанавливается и будет запускаться от имени текущего пользователя ОС. В случае использования MS SQL Server Express пароль можно не указывать, а служба будет установлена от имени **LocalSystem**.

В завершение установки можно создать ярлык запуска на рабочем столе. Для этого нужно нажать кнопку **Создать ярлык**. Запуск программы из ярлыка возможен после завершения работы программы установки.

# Настройка модуля.

Настройка МРП v.2 осуществляется из основного приложения Айтида. Для настройки необходимо добавить пункт меню **Справочник схем РМК**, используя команду **DO sprrmkschem**.

![Изображение выглядит как текст Автоматически созданное описание](/images/rmk/start/773ebd9de02d35da4733767ddc1bfdc7.png)

# Лицензирование.

Модуль регистрации продаж v.2 работает с любой конфигурацией Айтида. Для работы модуля необходима активная серверная лицензия. При работе с дополнительного рабочего места МРП v.2 занимает одну лицензию на рабочее место. Для работы МРП v.2 необходимо, чтобы в рабочем каталоге был файл gn_eval.dll из текущей версии Айтида. Без него модуль запускаться не будет, а будет выводить сообщение о том, что не удалось проверить наличие лицензии.

![](/images/rmk/start/f8cd89ca87a3d349d3bc5e63f0d52ca5.png)

Если работа МРП 2 осуществляется на отдельном компьютере вне локальной сети предприятия, то для работы необходима лицензия на специальную конфигурацию Айтида РМК.
