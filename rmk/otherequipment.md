---
title: Прочее оборудование
description: Айтида РМК
published: true
date: 2022-08-14T21:35:26.136Z
tags: прочее оборудование, журналирование, системы видеонаблюдения
editor: markdown
dateCreated: 2022-08-14T21:35:26.136Z
---

Модуль регистрации продаж 2 позволяет использовать виртуальное оборудование, обработки профиля которого вызываются при следующих действиях кассира:

1.  запуск программы (инициализация оборудования);
2.  открытие смены;
3.  закрытие смены;
4.  при нажатии кнопок и изменении значений органов управления в окне программы;
5.  при выполнении операций, для которых настроена запись истории действий кассира;
6.  при завершении работы программы.

# Профиль прочего оборудования.

В справочнике профилей оборудования есть возможность создать профиль для прочего оборудования.

![Изображение выглядит как текст Автоматически созданное описание](/images/rmk/otherequipment/ab1740743cd94a9b0c4e6d725b01778a.png)

Профиль прочего оборудования может содержать следующие обработки.

![Изображение выглядит как текст Автоматически созданное описание](/images/rmk/otherequipment/7e4f74a3f05aa55ee00da82dadfcf9cb.png)

Обязательными к реализации являются следующие обработки:

1.  **Имя устройства ПО**. Обработка вызывается в карточке торгового оборудования для определения названия устройства. Обработка должна возвращать строку с названием, для отображения в карточке оборудования в поле **Устройство**. Обработка получает индекс устройства и по индексу должна вернуть название устройства.
2.  **Количество зарегистрированных устройств**. Обработка вызывается в карточке торгового оборудования, для заполнения списка доступных устройств. Обработка должна возвращать положительное число, равное количеству устройств, зарегистрированных в драйвере.

    Остальные обработки не являются обязательными к реализации и могут быть реализованы для выполнения дополнительных действий.

3.  **Проверка действия пользователя**. Обработка вызывается при нажатии кассиром кнопок и изменении значений полей в формах модуля регистрации.
4.  **Запись истории действий пользователя**. Обработка вызывается при записи истории действий кассира.
5.  **Инициализация ПО**. Вызывается в момент запуска модуля продаж и загрузки профиля ПО.
6.  **Открытие смены в ПО**. Вызывается в момент открытия смены в модуле продаж.
7.  **Закрытие смена в ПО**. Вызывается в момент закрытия смены в модуле продаж. Не вызывается при печати z-отчета на ККТ.
8.  **Текст ошибки драйвера ПО**. В случае наличия ошибок обработка должна возвращать текст последней возникшей ошибки драйвера.
9.  **Последняя ошибка драйвера ПО**. В случае наличия ошибок обработка должна возвращать числовой код возникшей ошибки драйвера.
10. **Признак наличия ошибки**. В случае наличия ошибки обработка должна вернуть Истину.
11. **Наименование модели ПО**. Обработка может возвращать строку с названием модели используемого оборудования.
12. **Свойства драйвера**. Если используется сторонний драйвер оборудования, у которого могут быть заданы свойства, то обработка должна вызывать окно настроек драйвера. Обработка вызывается из карточки оборудования при нажатии кнопки Свойства драйвера.
13. **Окончание работы с ПО**. Обработка вызывается при завершении работы модуля продаж.

Всем обработкам передается набор переменных, необходимый для выполнения действий.

## Переменные, определяемые для профиля прочего оборудования.

| **Название переменной**                                        | **Описание**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|----------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| КОДОБОРУДОВАНИЯ / code                                         | Строка. Код карточки оборудования платежной системы.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| НОМЕРУСТРОЙСТВА / devicenumber                                 | Число. Номер устройства из карточки оборудования.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| СКЛАД / storage                                                | Строка. Код склада из карточки оборудования.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| ДЕНЕЖНЫЙКАРМАН / moneybox                                      | Строка. Код денежного кармана из карточки оборудования.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| ФИРМА / firm                                                   | Строка. Код фирмы из карточки оборудования.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| \_ИМЯПОЛЯ / fieldname                                          | Строка. Имя поля, значение которого было изменено или название кнопки, которая была нажата. Переменная определена для обработки **Проверка действия пользователя**.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| \_ЗНАЧЕНИЕПОЛЯ / fieldvalue                                    | Новое значение поля. Переменная определена для обработки **Проверка действия пользователя**.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| ДЕЙСТВИЕ / action                                              | Число целое. Код записываемого действия в историю действий кассира. Возможные значения: 1 – загрузка отложенного чека; 2 – запись отложенного чека; 3 – отмена чека; 4 – возврат по документу; 5 – выбор операции; 6 – закрытие смены; 7 – открытие смены; 8 – выбор ответственного; 9 – операция внесения; 10 – операция выплаты; 11 – изменение параметров модуля; 12 – изменение параметров чека; 13 – операция по свободной цене; 14 – печать копии чека: 15 – изменение цены позиции; 16 – изменение количества в строке; 17 – удаление строки чека; 18 – применение ручной скидки 19 – применение автоматической скидки; 20 – печать прочих отчетных форм. Переменная определяется только для обработки записи истории действий пользователя.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| ЗНАЧЕНИЕ / value, ЧЕКДО / chequebefore, ЧЕКПОСЛЕ / chequeafter | Строки. Переменные определяются только для обработки записи истории действий пользователя. ЗНАЧЕНИЕ принимает значение: для операций внесения и выплаты – сумма операции; загрузка отложенного чека – ИД отложенного чека; печать прочих отчетных форм – код отчета; удаление строки чека – номер строки; применение ручной скидки – процент / сумма скидки; выбор операции – код операции; применение автоматической скидки – номер карты; установка количество в строке – номер строки; установка цены в строке – номер строки; продажа по свободной цене – строка вида Название;Количество;Цена;Единица; Переменные ЧЕКДО / ЧЕКПОСЛЕ содержат описание чека в формате строки Json.  ЧЕКДО определена для действий: запись отложенного чека; отмена чека; выбор операции; изменение параметров чека; операция по свободной цене; изменение цены позиции; изменение количества в строке; удаление строки чека; применение ручной скидки применение автоматической скидки; ЧЕКПОСЛЕ определена для действий: загрузка отложенного чека; выбор операции; изменение параметров чека; операция по свободной цене; изменение цены позиции; изменение количества в строке; удаление строки чека; применение ручной скидки применение автоматической скидки; |

# Карточка оборудования прочего оборудования.

Для осуществления работы с прочим оборудованием необходимо создать карточку оборудования выбрав необходимый профиль и заполнив необходимый для работы параметры.

![Изображение выглядит как текст Автоматически созданное описание](/images/rmk/otherequipment/4c3aa436b108e62612e3e83f744643be.png)

В поле **Тип оборудования** необходимо выбрать **Прочее оборудование**. В поле **Профиль** будет предложен выбор из профилей для прочего оборудования.

Если используемый драйвер подразумевает возможность подключения нескольких устройств, то в поле **Устройство** необходимо выбрать конкретное значение. Поля **Склад**, **Денежный карман**, **Фирма**, **Номер ФР** могут быть использованы профилем для своих нужд.

Параметры **IP адрес**, **номер порта** могут быть использованы профилем по своему усмотрению.
